{
    "sourceFile": "src/pages/estoque/gestao/CadastroVeiculo.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 23,
            "patches": [
                {
                    "date": 1769805228534,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1769805315874,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,266 @@\n+import \"../../../assets/css/thead.css\";\r\n+import \"../../../assets/css/themify-icons.css\"\r\n+import Form from '../../../components/form/Form';\r\n+import Box from \"../../../components/box/Box\"\r\n+import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n+import Input from '../../../components/input/Input';\r\n+import Button from '../../../components/button/Button';\r\n+\r\n+import { useState } from 'react';\r\n+import { useGetData } from '../../../services/useGetData';\r\n+import { usePostData } from '../../../services/usePostData';\r\n+import { formatTimestamp } from '../../../hooks/formatDate';\r\n+import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n+import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n+\r\n+\r\n+\r\n+const CadastroVeiculo = () => {\r\n+\r\n+    const [marca, setMarca] = useState('')\r\n+    const [modelo, setModelo] = useState('')\r\n+    const [cor, setCor] = useState('')\r\n+    const [placa, setPlaca] = useState('')\r\n+    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n+    const [ano_modelo, setAnoModelo] = useState('')\r\n+    const [renavan, setRenavan] = useState('')\r\n+    const [unidade, setUnidade] = useState('')\r\n+    const [combustivel, setCombustivel] = useState([]);\r\n+    const [selectEstoque, setSelectEstoque] = useState('')\r\n+    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n+    const [cambio, setCambio] = useState('')\r\n+    const [quilometragem, setQuilometragem] = useState('')\r\n+    const [qtd_portas, setQtdPortas] = useState('')\r\n+\r\n+\r\n+    // Busca dados das lojas\r\n+    const { data: dadosLoja } = useGetData(`/lojas`)\r\n+    // Envia os dados do veículo\r\n+    const { loading, createData } = usePostData('/veiculos')\r\n+    const { createEstoqueExtra } = usePostData('/pulmao');\r\n+\r\n+    // Ordena as lojas por descrição\r\n+    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n+\r\n+\r\n+\r\n+    // Função para converter campos em CAIXA ALTA\r\n+    const toUpperFields = (obj, fields = []) => {\r\n+        const copy = { ...obj }\r\n+        fields.forEach((f) => {\r\n+            if (copy[f] !== undefined && copy[f] !== null) {\r\n+                copy[f] = String(copy[f]).toUpperCase()\r\n+            }\r\n+        })\r\n+        return copy\r\n+    }\r\n+\r\n+    // Função para lidar com o envio do formulário\r\n+    const handleSubmit = async (e) => {\r\n+        e.preventDefault()\r\n+\r\n+        const data_registro = formatTimestamp(new Date())\r\n+\r\n+        // Envia nome da loja no campo 'unidade'\r\n+        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n+\r\n+        console.log('Dados a serem enviados: ', dados)\r\n+        // Padroniza para caixa alta\r\n+        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n+        console.log('Dados a serem enviados:', dados);\r\n+\r\n+        // Validação de confirmação\r\n+        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n+        if (!confirmar) return;\r\n+\r\n+        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n+            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n+            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n+        } else {\r\n+            try {\r\n+                // Verifica se a placa já existe antes de enviar os dados\r\n+                const url = selectEstoque === 'pulmao'\r\n+                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n+                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n+\r\n+                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n+\r\n+                if (existente) {\r\n+                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n+                    return;\r\n+\r\n+                } else if (selectEstoque === 'pulmao') {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createEstoqueExtra(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+\r\n+                } else {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createData(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+                }\r\n+\r\n+            } catch (err) {\r\n+                console.error('Falha ao registrar o veículo: ', err);\r\n+                window.alert('Erro ao tentar registrar o veículo');\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+    // Função para lidar com a mudança de unidade\r\n+\r\n+    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n+    const handleUnidadeChange = (e) => {\r\n+        const selectedOption = e.target.selectedOptions[0]\r\n+        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n+        const descricao = selectedOption.getAttribute('data-descricao')\r\n+\r\n+        setUnidade(descricao)\r\n+        setCnpjUnidade(cnpj)\r\n+        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n+    }\r\n+\r\n+    return (\r\n+        <ContainerSecundario>\r\n+            <div className='container d-flex flex-column ' id=\"path\" >\r\n+                <div className=\"d-flex align-items-start \">\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n+                </div>\r\n+            </div>\r\n+            <div className=\"container d-flex justify-content-center card-container\">\r\n+                <Box>\r\n+                    <div className='panel-heading'>\r\n+                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n+                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n+                    </div>\r\n+                    <Form onSubmit={handleSubmit}>\r\n+                        <div className='col-12 col-md-3' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n+                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n+                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n+                                {lojasOrdenadas.map((loja) => (\r\n+                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n+                                        {loja.descricao}\r\n+                                    </option>\r\n+                                ))}\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className='col-12 col-md-4' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n+                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n+                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n+                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n+                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n+                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n+                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n+                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n+                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n+                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n+                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n+                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n+                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n+                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n+                                <option value=\"manual\">MANUAL</option>\r\n+                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n+                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n+                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n+                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n+                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"d-flex flex-row-reverse\">\r\n+                            \r\n+                            <Button type=\"submit\" variant='primary'>ENVIAR</Button>\r\n+                        </div>\r\n+                    </Form>\r\n+                </Box>\r\n+            </div>\r\n+        </ContainerSecundario>\r\n+\r\n+    )\r\n+}\r\n+\r\n+export default CadastroVeiculo\r\n"
                },
                {
                    "date": 1769805332476,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,268 @@\n+import \"../../../assets/css/thead.css\";\r\n+import \"../../../assets/css/themify-icons.css\"\r\n+import Form from '../../../components/form/Form';\r\n+import Box from \"../../../components/box/Box\"\r\n+import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n+import Input from '../../../components/input/Input';\r\n+import Button from '../../../components/button/Button';\r\n+\r\n+import { useState } from 'react';\r\n+import { useGetData } from '../../../services/useGetData';\r\n+import { usePostData } from '../../../services/usePostData';\r\n+import { formatTimestamp } from '../../../hooks/formatDate';\r\n+import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n+import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n+\r\n+\r\n+\r\n+const CadastroVeiculo = () => {\r\n+\r\n+    const [marca, setMarca] = useState('')\r\n+    const [modelo, setModelo] = useState('')\r\n+    const [cor, setCor] = useState('')\r\n+    const [placa, setPlaca] = useState('')\r\n+    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n+    const [ano_modelo, setAnoModelo] = useState('')\r\n+    const [renavan, setRenavan] = useState('')\r\n+    const [unidade, setUnidade] = useState('')\r\n+    const [combustivel, setCombustivel] = useState([]);\r\n+    const [selectEstoque, setSelectEstoque] = useState('')\r\n+    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n+    const [cambio, setCambio] = useState('')\r\n+    const [quilometragem, setQuilometragem] = useState('')\r\n+    const [qtd_portas, setQtdPortas] = useState('')\r\n+\r\n+\r\n+    // Busca dados das lojas\r\n+    const { data: dadosLoja } = useGetData(`/lojas`)\r\n+    // Envia os dados do veículo\r\n+    const { loading, createData } = usePostData('/veiculos')\r\n+    const { createEstoqueExtra } = usePostData('/pulmao');\r\n+\r\n+    // Ordena as lojas por descrição\r\n+    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n+\r\n+\r\n+\r\n+    // Função para converter campos em CAIXA ALTA\r\n+    const toUpperFields = (obj, fields = []) => {\r\n+        const copy = { ...obj }\r\n+        fields.forEach((f) => {\r\n+            if (copy[f] !== undefined && copy[f] !== null) {\r\n+                copy[f] = String(copy[f]).toUpperCase()\r\n+            }\r\n+        })\r\n+        return copy\r\n+    }\r\n+\r\n+    // Função para lidar com o envio do formulário\r\n+    const handleSubmit = async (e) => {\r\n+        e.preventDefault()\r\n+\r\n+        const data_registro = formatTimestamp(new Date())\r\n+\r\n+        // Envia nome da loja no campo 'unidade'\r\n+        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n+\r\n+        console.log('Dados a serem enviados: ', dados)\r\n+        // Padroniza para caixa alta\r\n+        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n+        console.log('Dados a serem enviados:', dados);\r\n+\r\n+        // Validação de confirmação\r\n+        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n+        if (!confirmar) return;\r\n+\r\n+        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n+            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n+            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n+        } else {\r\n+            try {\r\n+                // Verifica se a placa já existe antes de enviar os dados\r\n+                const url = selectEstoque === 'pulmao'\r\n+                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n+                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n+\r\n+                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n+\r\n+                if (existente) {\r\n+                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n+                    return;\r\n+\r\n+                } else if (selectEstoque === 'pulmao') {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createEstoqueExtra(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+\r\n+                } else {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createData(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+                }\r\n+\r\n+            } catch (err) {\r\n+                console.error('Falha ao registrar o veículo: ', err);\r\n+                window.alert('Erro ao tentar registrar o veículo');\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+    // Função para lidar com a mudança de unidade\r\n+\r\n+    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n+    const handleUnidadeChange = (e) => {\r\n+        const selectedOption = e.target.selectedOptions[0]\r\n+        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n+        const descricao = selectedOption.getAttribute('data-descricao')\r\n+\r\n+        setUnidade(descricao)\r\n+        setCnpjUnidade(cnpj)\r\n+        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n+    }\r\n+\r\n+    return (\r\n+        <ContainerSecundario>\r\n+            <div className='container d-flex flex-column ' id=\"path\" >\r\n+                <div className=\"d-flex align-items-start \">\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n+                </div>\r\n+            </div>\r\n+            <div className=\"container d-flex justify-content-center card-container\">\r\n+                <Box>\r\n+                    <div className='panel-heading'>\r\n+                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n+                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n+                    </div>\r\n+                    <Form onSubmit={handleSubmit}>\r\n+                        <div className='col-12 col-md-3' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n+                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n+                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n+                                {lojasOrdenadas.map((loja) => (\r\n+                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n+                                        {loja.descricao}\r\n+                                    </option>\r\n+                                ))}\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className='col-12 col-md-4' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n+                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n+                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n+                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n+                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n+                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n+                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n+                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n+                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n+                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n+                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n+                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n+                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n+                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n+                                <option value=\"manual\">MANUAL</option>\r\n+                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n+                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n+                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n+                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n+                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"d-flex flex-row-reverse\">\r\n+                            {loading && (\r\n+                                <div className=\"spinner-border\" role=\"status\" ></div>\r\n+                            )}\r\n+                            <Button type=\"submit\" variant='primary'>ENVIAR</Button>\r\n+                        </div>\r\n+                    </Form>\r\n+                </Box>\r\n+            </div>\r\n+        </ContainerSecundario>\r\n+\r\n+    )\r\n+}\r\n+\r\n+export default CadastroVeiculo\r\n"
                },
                {
                    "date": 1769805342134,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,268 @@\n+import \"../../../assets/css/thead.css\";\r\n+import \"../../../assets/css/themify-icons.css\"\r\n+import Form from '../../../components/form/Form';\r\n+import Box from \"../../../components/box/Box\"\r\n+import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n+import Input from '../../../components/input/Input';\r\n+import Button from '../../../components/button/Button';\r\n+\r\n+import { useState } from 'react';\r\n+import { useGetData } from '../../../services/useGetData';\r\n+import { usePostData } from '../../../services/usePostData';\r\n+import { formatTimestamp } from '../../../hooks/formatDate';\r\n+import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n+import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n+\r\n+\r\n+\r\n+const CadastroVeiculo = () => {\r\n+\r\n+    const [marca, setMarca] = useState('')\r\n+    const [modelo, setModelo] = useState('')\r\n+    const [cor, setCor] = useState('')\r\n+    const [placa, setPlaca] = useState('')\r\n+    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n+    const [ano_modelo, setAnoModelo] = useState('')\r\n+    const [renavan, setRenavan] = useState('')\r\n+    const [unidade, setUnidade] = useState('')\r\n+    const [combustivel, setCombustivel] = useState([]);\r\n+    const [selectEstoque, setSelectEstoque] = useState('')\r\n+    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n+    const [cambio, setCambio] = useState('')\r\n+    const [quilometragem, setQuilometragem] = useState('')\r\n+    const [qtd_portas, setQtdPortas] = useState('')\r\n+\r\n+\r\n+    // Busca dados das lojas\r\n+    const { data: dadosLoja } = useGetData(`/lojas`)\r\n+    // Envia os dados do veículo\r\n+    const { loading, createData } = usePostData('/veiculos')\r\n+    const { createEstoqueExtra } = usePostData('/pulmao');\r\n+\r\n+    // Ordena as lojas por descrição\r\n+    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n+\r\n+\r\n+\r\n+    // Função para converter campos em CAIXA ALTA\r\n+    const toUpperFields = (obj, fields = []) => {\r\n+        const copy = { ...obj }\r\n+        fields.forEach((f) => {\r\n+            if (copy[f] !== undefined && copy[f] !== null) {\r\n+                copy[f] = String(copy[f]).toUpperCase()\r\n+            }\r\n+        })\r\n+        return copy\r\n+    }\r\n+\r\n+    // Função para lidar com o envio do formulário\r\n+    const handleSubmit = async (e) => {\r\n+        e.preventDefault()\r\n+\r\n+        const data_registro = formatTimestamp(new Date())\r\n+\r\n+        // Envia nome da loja no campo 'unidade'\r\n+        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n+\r\n+        console.log('Dados a serem enviados: ', dados)\r\n+        // Padroniza para caixa alta\r\n+        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n+        console.log('Dados a serem enviados:', dados);\r\n+\r\n+        // Validação de confirmação\r\n+        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n+        if (!confirmar) return;\r\n+\r\n+        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n+            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n+            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n+        } else {\r\n+            try {\r\n+                // Verifica se a placa já existe antes de enviar os dados\r\n+                const url = selectEstoque === 'pulmao'\r\n+                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n+                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n+\r\n+                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n+\r\n+                if (existente) {\r\n+                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n+                    return;\r\n+\r\n+                } else if (selectEstoque === 'pulmao') {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createEstoqueExtra(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+\r\n+                } else {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createData(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+                }\r\n+\r\n+            } catch (err) {\r\n+                console.error('Falha ao registrar o veículo: ', err);\r\n+                window.alert('Erro ao tentar registrar o veículo');\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+    // Função para lidar com a mudança de unidade\r\n+\r\n+    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n+    const handleUnidadeChange = (e) => {\r\n+        const selectedOption = e.target.selectedOptions[0]\r\n+        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n+        const descricao = selectedOption.getAttribute('data-descricao')\r\n+\r\n+        setUnidade(descricao)\r\n+        setCnpjUnidade(cnpj)\r\n+        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n+    }\r\n+\r\n+    return (\r\n+        <ContainerSecundario>\r\n+            <div className='container d-flex flex-column ' id=\"path\" >\r\n+                <div className=\"d-flex align-items-start \">\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n+                </div>\r\n+            </div>\r\n+            <div className=\"container d-flex justify-content-center card-container\">\r\n+                <Box>\r\n+                    <div className='panel-heading'>\r\n+                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n+                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n+                    </div>\r\n+                    <Form onSubmit={handleSubmit}>\r\n+                        <div className='col-12 col-md-3' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n+                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n+                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n+                                {lojasOrdenadas.map((loja) => (\r\n+                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n+                                        {loja.descricao}\r\n+                                    </option>\r\n+                                ))}\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className='col-12 col-md-4' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n+                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n+                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n+                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n+                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n+                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n+                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n+                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n+                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n+                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n+                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n+                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n+                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n+                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n+                                <option value=\"manual\">MANUAL</option>\r\n+                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n+                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n+                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n+                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n+                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"d-flex flex-row-reverse\">\r\n+                            {loading && (\r\n+                                <div className=\"spinner-border\" role=\"status\" > </div>\r\n+                            )}\r\n+                            <Button type=\"submit\" variant='primary'>ENVIAR</Button>\r\n+                        </div>\r\n+                    </Form>\r\n+                </Box>\r\n+            </div>\r\n+        </ContainerSecundario>\r\n+\r\n+    )\r\n+}\r\n+\r\n+export default CadastroVeiculo\r\n"
                },
                {
                    "date": 1769805350899,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,269 @@\n+import \"../../../assets/css/thead.css\";\r\n+import \"../../../assets/css/themify-icons.css\"\r\n+import Form from '../../../components/form/Form';\r\n+import Box from \"../../../components/box/Box\"\r\n+import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n+import Input from '../../../components/input/Input';\r\n+import Button from '../../../components/button/Button';\r\n+\r\n+import { useState } from 'react';\r\n+import { useGetData } from '../../../services/useGetData';\r\n+import { usePostData } from '../../../services/usePostData';\r\n+import { formatTimestamp } from '../../../hooks/formatDate';\r\n+import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n+import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n+\r\n+\r\n+\r\n+const CadastroVeiculo = () => {\r\n+\r\n+    const [marca, setMarca] = useState('')\r\n+    const [modelo, setModelo] = useState('')\r\n+    const [cor, setCor] = useState('')\r\n+    const [placa, setPlaca] = useState('')\r\n+    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n+    const [ano_modelo, setAnoModelo] = useState('')\r\n+    const [renavan, setRenavan] = useState('')\r\n+    const [unidade, setUnidade] = useState('')\r\n+    const [combustivel, setCombustivel] = useState([]);\r\n+    const [selectEstoque, setSelectEstoque] = useState('')\r\n+    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n+    const [cambio, setCambio] = useState('')\r\n+    const [quilometragem, setQuilometragem] = useState('')\r\n+    const [qtd_portas, setQtdPortas] = useState('')\r\n+\r\n+\r\n+    // Busca dados das lojas\r\n+    const { data: dadosLoja } = useGetData(`/lojas`)\r\n+    // Envia os dados do veículo\r\n+    const { loading, createData } = usePostData('/veiculos')\r\n+    const { createEstoqueExtra } = usePostData('/pulmao');\r\n+\r\n+    // Ordena as lojas por descrição\r\n+    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n+\r\n+\r\n+\r\n+    // Função para converter campos em CAIXA ALTA\r\n+    const toUpperFields = (obj, fields = []) => {\r\n+        const copy = { ...obj }\r\n+        fields.forEach((f) => {\r\n+            if (copy[f] !== undefined && copy[f] !== null) {\r\n+                copy[f] = String(copy[f]).toUpperCase()\r\n+            }\r\n+        })\r\n+        return copy\r\n+    }\r\n+\r\n+    // Função para lidar com o envio do formulário\r\n+    const handleSubmit = async (e) => {\r\n+        e.preventDefault()\r\n+\r\n+        const data_registro = formatTimestamp(new Date())\r\n+\r\n+        // Envia nome da loja no campo 'unidade'\r\n+        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n+\r\n+        console.log('Dados a serem enviados: ', dados)\r\n+        // Padroniza para caixa alta\r\n+        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n+        console.log('Dados a serem enviados:', dados);\r\n+\r\n+        // Validação de confirmação\r\n+        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n+        if (!confirmar) return;\r\n+\r\n+        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n+            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n+            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n+        } else {\r\n+            try {\r\n+                // Verifica se a placa já existe antes de enviar os dados\r\n+                const url = selectEstoque === 'pulmao'\r\n+                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n+                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n+\r\n+                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n+\r\n+                if (existente) {\r\n+                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n+                    return;\r\n+\r\n+                } else if (selectEstoque === 'pulmao') {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createEstoqueExtra(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+\r\n+                } else {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createData(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+                }\r\n+\r\n+            } catch (err) {\r\n+                console.error('Falha ao registrar o veículo: ', err);\r\n+                window.alert('Erro ao tentar registrar o veículo');\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+    // Função para lidar com a mudança de unidade\r\n+\r\n+    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n+    const handleUnidadeChange = (e) => {\r\n+        const selectedOption = e.target.selectedOptions[0]\r\n+        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n+        const descricao = selectedOption.getAttribute('data-descricao')\r\n+\r\n+        setUnidade(descricao)\r\n+        setCnpjUnidade(cnpj)\r\n+        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n+    }\r\n+\r\n+    return (\r\n+        <ContainerSecundario>\r\n+            <div className='container d-flex flex-column ' id=\"path\" >\r\n+                <div className=\"d-flex align-items-start \">\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n+                </div>\r\n+            </div>\r\n+            <div className=\"container d-flex justify-content-center card-container\">\r\n+                <Box>\r\n+                    <div className='panel-heading'>\r\n+                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n+                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n+                    </div>\r\n+                    <Form onSubmit={handleSubmit}>\r\n+                        <div className='col-12 col-md-3' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n+                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n+                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n+                                {lojasOrdenadas.map((loja) => (\r\n+                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n+                                        {loja.descricao}\r\n+                                    </option>\r\n+                                ))}\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className='col-12 col-md-4' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n+                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n+                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n+                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n+                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n+                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n+                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n+                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n+                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n+                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n+                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n+                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n+                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n+                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n+                                <option value=\"manual\">MANUAL</option>\r\n+                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n+                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n+                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n+                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n+                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"d-flex flex-row-reverse\">\r\n+                            {loading && (\r\n+                                <div className=\"spinner-border\" role=\"status\" ></div>\r\n+                            )}\r\n+                            <Button type=\"submit\" variant='primary'>ENVIAR</Button>\r\n+                            \r\n+                        </div>\r\n+                    </Form>\r\n+                </Box>\r\n+            </div>\r\n+        </ContainerSecundario>\r\n+\r\n+    )\r\n+}\r\n+\r\n+export default CadastroVeiculo\r\n"
                },
                {
                    "date": 1769805379872,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,269 @@\n+import \"../../../assets/css/thead.css\";\r\n+import \"../../../assets/css/themify-icons.css\"\r\n+import Form from '../../../components/form/Form';\r\n+import Box from \"../../../components/box/Box\"\r\n+import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n+import Input from '../../../components/input/Input';\r\n+import Button from '../../../components/button/Button';\r\n+\r\n+import { useState } from 'react';\r\n+import { useGetData } from '../../../services/useGetData';\r\n+import { usePostData } from '../../../services/usePostData';\r\n+import { formatTimestamp } from '../../../hooks/formatDate';\r\n+import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n+import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n+\r\n+\r\n+\r\n+const CadastroVeiculo = () => {\r\n+\r\n+    const [marca, setMarca] = useState('')\r\n+    const [modelo, setModelo] = useState('')\r\n+    const [cor, setCor] = useState('')\r\n+    const [placa, setPlaca] = useState('')\r\n+    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n+    const [ano_modelo, setAnoModelo] = useState('')\r\n+    const [renavan, setRenavan] = useState('')\r\n+    const [unidade, setUnidade] = useState('')\r\n+    const [combustivel, setCombustivel] = useState([]);\r\n+    const [selectEstoque, setSelectEstoque] = useState('')\r\n+    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n+    const [cambio, setCambio] = useState('')\r\n+    const [quilometragem, setQuilometragem] = useState('')\r\n+    const [qtd_portas, setQtdPortas] = useState('')\r\n+\r\n+\r\n+    // Busca dados das lojas\r\n+    const { data: dadosLoja } = useGetData(`/lojas`)\r\n+    // Envia os dados do veículo\r\n+    const { loading, createData } = usePostData('/veiculos')\r\n+    const { createEstoqueExtra } = usePostData('/pulmao');\r\n+\r\n+    // Ordena as lojas por descrição\r\n+    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n+\r\n+\r\n+\r\n+    // Função para converter campos em CAIXA ALTA\r\n+    const toUpperFields = (obj, fields = []) => {\r\n+        const copy = { ...obj }\r\n+        fields.forEach((f) => {\r\n+            if (copy[f] !== undefined && copy[f] !== null) {\r\n+                copy[f] = String(copy[f]).toUpperCase()\r\n+            }\r\n+        })\r\n+        return copy\r\n+    }\r\n+\r\n+    // Função para lidar com o envio do formulário\r\n+    const handleSubmit = async (e) => {\r\n+        e.preventDefault()\r\n+\r\n+        const data_registro = formatTimestamp(new Date())\r\n+\r\n+        // Envia nome da loja no campo 'unidade'\r\n+        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n+\r\n+        console.log('Dados a serem enviados: ', dados)\r\n+        // Padroniza para caixa alta\r\n+        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n+        console.log('Dados a serem enviados:', dados);\r\n+\r\n+        // Validação de confirmação\r\n+        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n+        if (!confirmar) return;\r\n+\r\n+        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n+            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n+            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n+        } else {\r\n+            try {\r\n+                // Verifica se a placa já existe antes de enviar os dados\r\n+                const url = selectEstoque === 'pulmao'\r\n+                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n+                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n+\r\n+                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n+\r\n+                if (existente) {\r\n+                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n+                    return;\r\n+\r\n+                } else if (selectEstoque === 'pulmao') {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createEstoqueExtra(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+\r\n+                } else {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createData(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+                }\r\n+\r\n+            } catch (err) {\r\n+                console.error('Falha ao registrar o veículo: ', err);\r\n+                window.alert('Erro ao tentar registrar o veículo');\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+    // Função para lidar com a mudança de unidade\r\n+\r\n+    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n+    const handleUnidadeChange = (e) => {\r\n+        const selectedOption = e.target.selectedOptions[0]\r\n+        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n+        const descricao = selectedOption.getAttribute('data-descricao')\r\n+\r\n+        setUnidade(descricao)\r\n+        setCnpjUnidade(cnpj)\r\n+        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n+    }\r\n+\r\n+    return (\r\n+        <ContainerSecundario>\r\n+            <div className='container d-flex flex-column ' id=\"path\" >\r\n+                <div className=\"d-flex align-items-start \">\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n+                </div>\r\n+            </div>\r\n+            <div className=\"container d-flex justify-content-center card-container\">\r\n+                <Box>\r\n+                    <div className='panel-heading'>\r\n+                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n+                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n+                    </div>\r\n+                    <Form onSubmit={handleSubmit}>\r\n+                        <div className='col-12 col-md-3' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n+                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n+                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n+                                {lojasOrdenadas.map((loja) => (\r\n+                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n+                                        {loja.descricao}\r\n+                                    </option>\r\n+                                ))}\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className='col-12 col-md-4' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n+                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n+                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n+                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n+                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n+                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n+                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n+                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n+                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n+                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n+                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n+                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n+                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n+                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n+                                <option value=\"manual\">MANUAL</option>\r\n+                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n+                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n+                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n+                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n+                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"d-flex flex-row-reverse\">\r\n+                            {loading && (\r\n+                                <div className=\"spinner-border\" role=\"status\" ></div>\r\n+                        \r\n+                            <Button type=\"submit\" variant='primary'>ENVIAR</Button>\r\n+                                )}\r\n+                        </div>\r\n+                    </Form>\r\n+                </Box>\r\n+            </div>\r\n+        </ContainerSecundario>\r\n+\r\n+    )\r\n+}\r\n+\r\n+export default CadastroVeiculo\r\n"
                },
                {
                    "date": 1769805386662,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -252,9 +252,9 @@\n                                 value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n                         </div>\r\n                         <div className=\"d-flex flex-row-reverse\">\r\n                             {loading && (\r\n-                                <div className=\"spinner-border\" role=\"status\" ></div>\r\n+                                <div className=\"spinner-border\" role=\"status\" > </div>\r\n                             )}\r\n                             <Button type=\"submit\" variant='primary'>ENVIAR</Button>\r\n                         </div>\r\n                     </Form>\r\n"
                },
                {
                    "date": 1769805393403,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -252,11 +252,11 @@\n                                 value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n                         </div>\r\n                         <div className=\"d-flex flex-row-reverse\">\r\n                             {loading && (\r\n-                                <div className=\"spinner-border\" role=\"status\" > </div>\r\n+                                <div className=\"spinner-border\" role=\"status\" > <Button type=\"submit\" variant='primary'>ENVIAR</Button></div>\r\n                             )}\r\n-                            <Button type=\"submit\" variant='primary'>ENVIAR</Button>\r\n+                            \r\n                         </div>\r\n                     </Form>\r\n                 </Box>\r\n             </div>\r\n"
                },
                {
                    "date": 1769805411143,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,269 @@\n+import \"../../../assets/css/thead.css\";\r\n+import \"../../../assets/css/themify-icons.css\"\r\n+import Form from '../../../components/form/Form';\r\n+import Box from \"../../../components/box/Box\"\r\n+import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n+import Input from '../../../components/input/Input';\r\n+import Button from '../../../components/button/Button';\r\n+\r\n+import { useState } from 'react';\r\n+import { useGetData } from '../../../services/useGetData';\r\n+import { usePostData } from '../../../services/usePostData';\r\n+import { formatTimestamp } from '../../../hooks/formatDate';\r\n+import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n+import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n+\r\n+\r\n+\r\n+const CadastroVeiculo = () => {\r\n+\r\n+    const [marca, setMarca] = useState('')\r\n+    const [modelo, setModelo] = useState('')\r\n+    const [cor, setCor] = useState('')\r\n+    const [placa, setPlaca] = useState('')\r\n+    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n+    const [ano_modelo, setAnoModelo] = useState('')\r\n+    const [renavan, setRenavan] = useState('')\r\n+    const [unidade, setUnidade] = useState('')\r\n+    const [combustivel, setCombustivel] = useState([]);\r\n+    const [selectEstoque, setSelectEstoque] = useState('')\r\n+    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n+    const [cambio, setCambio] = useState('')\r\n+    const [quilometragem, setQuilometragem] = useState('')\r\n+    const [qtd_portas, setQtdPortas] = useState('')\r\n+\r\n+\r\n+    // Busca dados das lojas\r\n+    const { data: dadosLoja } = useGetData(`/lojas`)\r\n+    // Envia os dados do veículo\r\n+    const { loading, createData } = usePostData('/veiculos')\r\n+    const { createEstoqueExtra } = usePostData('/pulmao');\r\n+\r\n+    // Ordena as lojas por descrição\r\n+    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n+\r\n+\r\n+\r\n+    // Função para converter campos em CAIXA ALTA\r\n+    const toUpperFields = (obj, fields = []) => {\r\n+        const copy = { ...obj }\r\n+        fields.forEach((f) => {\r\n+            if (copy[f] !== undefined && copy[f] !== null) {\r\n+                copy[f] = String(copy[f]).toUpperCase()\r\n+            }\r\n+        })\r\n+        return copy\r\n+    }\r\n+\r\n+    // Função para lidar com o envio do formulário\r\n+    const handleSubmit = async (e) => {\r\n+        e.preventDefault()\r\n+\r\n+        const data_registro = formatTimestamp(new Date())\r\n+\r\n+        // Envia nome da loja no campo 'unidade'\r\n+        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n+\r\n+        console.log('Dados a serem enviados: ', dados)\r\n+        // Padroniza para caixa alta\r\n+        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n+        console.log('Dados a serem enviados:', dados);\r\n+\r\n+        // Validação de confirmação\r\n+        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n+        if (!confirmar) return;\r\n+\r\n+        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n+            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n+            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n+        } else {\r\n+            try {\r\n+                // Verifica se a placa já existe antes de enviar os dados\r\n+                const url = selectEstoque === 'pulmao'\r\n+                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n+                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n+\r\n+                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n+\r\n+                if (existente) {\r\n+                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n+                    return;\r\n+\r\n+                } else if (selectEstoque === 'pulmao') {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createEstoqueExtra(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+\r\n+                } else {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createData(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+                }\r\n+\r\n+            } catch (err) {\r\n+                console.error('Falha ao registrar o veículo: ', err);\r\n+                window.alert('Erro ao tentar registrar o veículo');\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+    // Função para lidar com a mudança de unidade\r\n+\r\n+    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n+    const handleUnidadeChange = (e) => {\r\n+        const selectedOption = e.target.selectedOptions[0]\r\n+        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n+        const descricao = selectedOption.getAttribute('data-descricao')\r\n+\r\n+        setUnidade(descricao)\r\n+        setCnpjUnidade(cnpj)\r\n+        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n+    }\r\n+\r\n+    return (\r\n+        <ContainerSecundario>\r\n+            <div className='container d-flex flex-column ' id=\"path\" >\r\n+                <div className=\"d-flex align-items-start \">\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n+                </div>\r\n+            </div>\r\n+            <div className=\"container d-flex justify-content-center card-container\">\r\n+                <Box>\r\n+                    <div className='panel-heading'>\r\n+                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n+                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n+                    </div>\r\n+                    <Form onSubmit={handleSubmit}>\r\n+                        <div className='col-12 col-md-3' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n+                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n+                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n+                                {lojasOrdenadas.map((loja) => (\r\n+                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n+                                        {loja.descricao}\r\n+                                    </option>\r\n+                                ))}\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className='col-12 col-md-4' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n+                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n+                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n+                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n+                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n+                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n+                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n+                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n+                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n+                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n+                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n+                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n+                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n+                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n+                                <option value=\"manual\">MANUAL</option>\r\n+                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n+                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n+                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n+                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n+                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"d-flex flex-row-reverse\">\r\n+                            \r\n+                            {loading && (\r\n+                                <div className=\"spinner-border\" role=\"status\" > </div>\r\n+                            )}\r\n+                            <Button type=\"submit\" variant='primary'>ENVIAR</Button>\r\n+                        </div>\r\n+                    </Form>\r\n+                </Box>\r\n+            </div>\r\n+        </ContainerSecundario>\r\n+\r\n+    )\r\n+}\r\n+\r\n+export default CadastroVeiculo\r\n"
                },
                {
                    "date": 1769805419260,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,269 @@\n+import \"../../../assets/css/thead.css\";\r\n+import \"../../../assets/css/themify-icons.css\"\r\n+import Form from '../../../components/form/Form';\r\n+import Box from \"../../../components/box/Box\"\r\n+import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n+import Input from '../../../components/input/Input';\r\n+import Button from '../../../components/button/Button';\r\n+\r\n+import { useState } from 'react';\r\n+import { useGetData } from '../../../services/useGetData';\r\n+import { usePostData } from '../../../services/usePostData';\r\n+import { formatTimestamp } from '../../../hooks/formatDate';\r\n+import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n+import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n+\r\n+\r\n+\r\n+const CadastroVeiculo = () => {\r\n+\r\n+    const [marca, setMarca] = useState('')\r\n+    const [modelo, setModelo] = useState('')\r\n+    const [cor, setCor] = useState('')\r\n+    const [placa, setPlaca] = useState('')\r\n+    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n+    const [ano_modelo, setAnoModelo] = useState('')\r\n+    const [renavan, setRenavan] = useState('')\r\n+    const [unidade, setUnidade] = useState('')\r\n+    const [combustivel, setCombustivel] = useState([]);\r\n+    const [selectEstoque, setSelectEstoque] = useState('')\r\n+    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n+    const [cambio, setCambio] = useState('')\r\n+    const [quilometragem, setQuilometragem] = useState('')\r\n+    const [qtd_portas, setQtdPortas] = useState('')\r\n+\r\n+\r\n+    // Busca dados das lojas\r\n+    const { data: dadosLoja } = useGetData(`/lojas`)\r\n+    // Envia os dados do veículo\r\n+    const { loading, createData } = usePostData('/veiculos')\r\n+    const { createEstoqueExtra } = usePostData('/pulmao');\r\n+\r\n+    // Ordena as lojas por descrição\r\n+    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n+\r\n+\r\n+\r\n+    // Função para converter campos em CAIXA ALTA\r\n+    const toUpperFields = (obj, fields = []) => {\r\n+        const copy = { ...obj }\r\n+        fields.forEach((f) => {\r\n+            if (copy[f] !== undefined && copy[f] !== null) {\r\n+                copy[f] = String(copy[f]).toUpperCase()\r\n+            }\r\n+        })\r\n+        return copy\r\n+    }\r\n+\r\n+    // Função para lidar com o envio do formulário\r\n+    const handleSubmit = async (e) => {\r\n+        e.preventDefault()\r\n+\r\n+        const data_registro = formatTimestamp(new Date())\r\n+\r\n+        // Envia nome da loja no campo 'unidade'\r\n+        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n+\r\n+        console.log('Dados a serem enviados: ', dados)\r\n+        // Padroniza para caixa alta\r\n+        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n+        console.log('Dados a serem enviados:', dados);\r\n+\r\n+        // Validação de confirmação\r\n+        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n+        if (!confirmar) return;\r\n+\r\n+        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n+            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n+            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n+        } else {\r\n+            try {\r\n+                // Verifica se a placa já existe antes de enviar os dados\r\n+                const url = selectEstoque === 'pulmao'\r\n+                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n+                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n+\r\n+                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n+\r\n+                if (existente) {\r\n+                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n+                    return;\r\n+\r\n+                } else if (selectEstoque === 'pulmao') {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createEstoqueExtra(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+\r\n+                } else {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createData(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+                }\r\n+\r\n+            } catch (err) {\r\n+                console.error('Falha ao registrar o veículo: ', err);\r\n+                window.alert('Erro ao tentar registrar o veículo');\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+    // Função para lidar com a mudança de unidade\r\n+\r\n+    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n+    const handleUnidadeChange = (e) => {\r\n+        const selectedOption = e.target.selectedOptions[0]\r\n+        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n+        const descricao = selectedOption.getAttribute('data-descricao')\r\n+\r\n+        setUnidade(descricao)\r\n+        setCnpjUnidade(cnpj)\r\n+        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n+    }\r\n+\r\n+    return (\r\n+        <ContainerSecundario>\r\n+            <div className='container d-flex flex-column ' id=\"path\" >\r\n+                <div className=\"d-flex align-items-start \">\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n+                </div>\r\n+            </div>\r\n+            <div className=\"container d-flex justify-content-center card-container\">\r\n+                <Box>\r\n+                    <div className='panel-heading'>\r\n+                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n+                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n+                    </div>\r\n+                    <Form onSubmit={handleSubmit}>\r\n+                        <div className='col-12 col-md-3' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n+                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n+                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n+                                {lojasOrdenadas.map((loja) => (\r\n+                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n+                                        {loja.descricao}\r\n+                                    </option>\r\n+                                ))}\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className='col-12 col-md-4' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n+                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n+                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n+                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n+                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n+                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n+                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n+                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n+                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n+                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n+                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n+                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n+                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n+                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n+                                <option value=\"manual\">MANUAL</option>\r\n+                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n+                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n+                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n+                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n+                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"d-flex flex-row-reverse\">\r\n+                            <Button type=\"submit\" variant='primary'>\r\n+                            {loading && (\r\n+                                <div className=\"spinner-border\" role=\"status\" > </div>\r\n+                            )}\r\n+                            ENVIAR</Button>\r\n+                        </div>\r\n+                    </Form>\r\n+                </Box>\r\n+            </div>\r\n+        </ContainerSecundario>\r\n+\r\n+    )\r\n+}\r\n+\r\n+export default CadastroVeiculo\r\n"
                },
                {
                    "date": 1769805428054,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,270 @@\n+import \"../../../assets/css/thead.css\";\r\n+import \"../../../assets/css/themify-icons.css\"\r\n+import Form from '../../../components/form/Form';\r\n+import Box from \"../../../components/box/Box\"\r\n+import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n+import Input from '../../../components/input/Input';\r\n+import Button from '../../../components/button/Button';\r\n+\r\n+import { useState } from 'react';\r\n+import { useGetData } from '../../../services/useGetData';\r\n+import { usePostData } from '../../../services/usePostData';\r\n+import { formatTimestamp } from '../../../hooks/formatDate';\r\n+import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n+import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n+\r\n+\r\n+\r\n+const CadastroVeiculo = () => {\r\n+\r\n+    const [marca, setMarca] = useState('')\r\n+    const [modelo, setModelo] = useState('')\r\n+    const [cor, setCor] = useState('')\r\n+    const [placa, setPlaca] = useState('')\r\n+    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n+    const [ano_modelo, setAnoModelo] = useState('')\r\n+    const [renavan, setRenavan] = useState('')\r\n+    const [unidade, setUnidade] = useState('')\r\n+    const [combustivel, setCombustivel] = useState([]);\r\n+    const [selectEstoque, setSelectEstoque] = useState('')\r\n+    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n+    const [cambio, setCambio] = useState('')\r\n+    const [quilometragem, setQuilometragem] = useState('')\r\n+    const [qtd_portas, setQtdPortas] = useState('')\r\n+\r\n+\r\n+    // Busca dados das lojas\r\n+    const { data: dadosLoja } = useGetData(`/lojas`)\r\n+    // Envia os dados do veículo\r\n+    const { loading, createData } = usePostData('/veiculos')\r\n+    const { createEstoqueExtra } = usePostData('/pulmao');\r\n+\r\n+    // Ordena as lojas por descrição\r\n+    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n+\r\n+\r\n+\r\n+    // Função para converter campos em CAIXA ALTA\r\n+    const toUpperFields = (obj, fields = []) => {\r\n+        const copy = { ...obj }\r\n+        fields.forEach((f) => {\r\n+            if (copy[f] !== undefined && copy[f] !== null) {\r\n+                copy[f] = String(copy[f]).toUpperCase()\r\n+            }\r\n+        })\r\n+        return copy\r\n+    }\r\n+\r\n+    // Função para lidar com o envio do formulário\r\n+    const handleSubmit = async (e) => {\r\n+        e.preventDefault()\r\n+\r\n+        const data_registro = formatTimestamp(new Date())\r\n+\r\n+        // Envia nome da loja no campo 'unidade'\r\n+        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n+\r\n+        console.log('Dados a serem enviados: ', dados)\r\n+        // Padroniza para caixa alta\r\n+        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n+        console.log('Dados a serem enviados:', dados);\r\n+\r\n+        // Validação de confirmação\r\n+        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n+        if (!confirmar) return;\r\n+\r\n+        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n+            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n+            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n+        } else {\r\n+            try {\r\n+                // Verifica se a placa já existe antes de enviar os dados\r\n+                const url = selectEstoque === 'pulmao'\r\n+                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n+                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n+\r\n+                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n+\r\n+                if (existente) {\r\n+                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n+                    return;\r\n+\r\n+                } else if (selectEstoque === 'pulmao') {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createEstoqueExtra(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+\r\n+                } else {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createData(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+                }\r\n+\r\n+            } catch (err) {\r\n+                console.error('Falha ao registrar o veículo: ', err);\r\n+                window.alert('Erro ao tentar registrar o veículo');\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+    // Função para lidar com a mudança de unidade\r\n+\r\n+    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n+    const handleUnidadeChange = (e) => {\r\n+        const selectedOption = e.target.selectedOptions[0]\r\n+        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n+        const descricao = selectedOption.getAttribute('data-descricao')\r\n+\r\n+        setUnidade(descricao)\r\n+        setCnpjUnidade(cnpj)\r\n+        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n+    }\r\n+\r\n+    return (\r\n+        <ContainerSecundario>\r\n+            <div className='container d-flex flex-column ' id=\"path\" >\r\n+                <div className=\"d-flex align-items-start \">\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n+                </div>\r\n+            </div>\r\n+            <div className=\"container d-flex justify-content-center card-container\">\r\n+                <Box>\r\n+                    <div className='panel-heading'>\r\n+                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n+                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n+                    </div>\r\n+                    <Form onSubmit={handleSubmit}>\r\n+                        <div className='col-12 col-md-3' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n+                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n+                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n+                                {lojasOrdenadas.map((loja) => (\r\n+                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n+                                        {loja.descricao}\r\n+                                    </option>\r\n+                                ))}\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className='col-12 col-md-4' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n+                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n+                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n+                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n+                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n+                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n+                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n+                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n+                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n+                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n+                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n+                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n+                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n+                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n+                                <option value=\"manual\">MANUAL</option>\r\n+                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n+                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n+                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n+                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n+                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"d-flex flex-row-reverse\">\r\n+                            <Button type=\"submit\" variant='primary'>\r\n+                            {loading && (\r\n+                                <div className=\"spinner-border\" role=\"status\" > </div>\r\n+                            )}\r\n+                                ENVIAR\r\n+                            </Button>\r\n+                        </div>\r\n+                    </Form>\r\n+                </Box>\r\n+            </div>\r\n+        </ContainerSecundario>\r\n+\r\n+    )\r\n+}\r\n+\r\n+export default CadastroVeiculo\r\n"
                },
                {
                    "date": 1769805494331,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,270 @@\n+import \"../../../assets/css/thead.css\";\r\n+import \"../../../assets/css/themify-icons.css\"\r\n+import Form from '../../../components/form/Form';\r\n+import Box from \"../../../components/box/Box\"\r\n+import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n+import Input from '../../../components/input/Input';\r\n+import Button from '../../../components/button/Button';\r\n+\r\n+import { useState } from 'react';\r\n+import { useGetData } from '../../../services/useGetData';\r\n+import { usePostData } from '../../../services/usePostData';\r\n+import { formatTimestamp } from '../../../hooks/formatDate';\r\n+import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n+import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n+\r\n+\r\n+\r\n+const CadastroVeiculo = () => {\r\n+\r\n+    const [marca, setMarca] = useState('')\r\n+    const [modelo, setModelo] = useState('')\r\n+    const [cor, setCor] = useState('')\r\n+    const [placa, setPlaca] = useState('')\r\n+    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n+    const [ano_modelo, setAnoModelo] = useState('')\r\n+    const [renavan, setRenavan] = useState('')\r\n+    const [unidade, setUnidade] = useState('')\r\n+    const [combustivel, setCombustivel] = useState([]);\r\n+    const [selectEstoque, setSelectEstoque] = useState('')\r\n+    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n+    const [cambio, setCambio] = useState('')\r\n+    const [quilometragem, setQuilometragem] = useState('')\r\n+    const [qtd_portas, setQtdPortas] = useState('')\r\n+\r\n+\r\n+    // Busca dados das lojas\r\n+    const { data: dadosLoja } = useGetData(`/lojas`)\r\n+    // Envia os dados do veículo\r\n+    const { loading, createData } = usePostData('/veiculos')\r\n+    const { createEstoqueExtra } = usePostData('/pulmao');\r\n+\r\n+    // Ordena as lojas por descrição\r\n+    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n+\r\n+\r\n+\r\n+    // Função para converter campos em CAIXA ALTA\r\n+    const toUpperFields = (obj, fields = []) => {\r\n+        const copy = { ...obj }\r\n+        fields.forEach((f) => {\r\n+            if (copy[f] !== undefined && copy[f] !== null) {\r\n+                copy[f] = String(copy[f]).toUpperCase()\r\n+            }\r\n+        })\r\n+        return copy\r\n+    }\r\n+\r\n+    // Função para lidar com o envio do formulário\r\n+    const handleSubmit = async (e) => {\r\n+        e.preventDefault()\r\n+\r\n+        const data_registro = formatTimestamp(new Date())\r\n+\r\n+        // Envia nome da loja no campo 'unidade'\r\n+        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n+\r\n+        console.log('Dados a serem enviados: ', dados)\r\n+        // Padroniza para caixa alta\r\n+        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n+        console.log('Dados a serem enviados:', dados);\r\n+\r\n+        // Validação de confirmação\r\n+        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n+        if (!confirmar) return;\r\n+\r\n+        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n+            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n+            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n+        } else {\r\n+            try {\r\n+                // Verifica se a placa já existe antes de enviar os dados\r\n+                const url = selectEstoque === 'pulmao'\r\n+                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n+                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n+\r\n+                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n+\r\n+                if (existente) {\r\n+                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n+                    return;\r\n+\r\n+                } else if (selectEstoque === 'pulmao') {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createEstoqueExtra(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+\r\n+                } else {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createData(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+                }\r\n+\r\n+            } catch (err) {\r\n+                console.error('Falha ao registrar o veículo: ', err);\r\n+                window.alert('Erro ao tentar registrar o veículo');\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+    // Função para lidar com a mudança de unidade\r\n+\r\n+    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n+    const handleUnidadeChange = (e) => {\r\n+        const selectedOption = e.target.selectedOptions[0]\r\n+        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n+        const descricao = selectedOption.getAttribute('data-descricao')\r\n+\r\n+        setUnidade(descricao)\r\n+        setCnpjUnidade(cnpj)\r\n+        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n+    }\r\n+\r\n+    return (\r\n+        <ContainerSecundario>\r\n+            <div className='container d-flex flex-column ' id=\"path\" >\r\n+                <div className=\"d-flex align-items-start \">\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n+                </div>\r\n+            </div>\r\n+            <div className=\"container d-flex justify-content-center card-container\">\r\n+                <Box>\r\n+                    <div className='panel-heading'>\r\n+                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n+                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n+                    </div>\r\n+                    <Form onSubmit={handleSubmit}>\r\n+                        <div className='col-12 col-md-3' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n+                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n+                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n+                                {lojasOrdenadas.map((loja) => (\r\n+                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n+                                        {loja.descricao}\r\n+                                    </option>\r\n+                                ))}\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className='col-12 col-md-4' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n+                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n+                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n+                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n+                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n+                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n+                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n+                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n+                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n+                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n+                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n+                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n+                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n+                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n+                                <option value=\"manual\">MANUAL</option>\r\n+                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n+                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n+                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n+                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n+                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"d-flex flex-row-reverse\">\r\n+                            <Button type=\"submit\" variant='primary'>\r\n+                                {loading && (\r\n+                                    <div className=\"spinner-border\" role=\"status\" he> </div>\r\n+                                )}\r\n+                                ENVIAR\r\n+                            </Button>\r\n+                        </div>\r\n+                    </Form>\r\n+                </Box>\r\n+            </div>\r\n+        </ContainerSecundario>\r\n+\r\n+    )\r\n+}\r\n+\r\n+export default CadastroVeiculo\r\n"
                },
                {
                    "date": 1769805539749,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,270 @@\n+import \"../../../assets/css/thead.css\";\r\n+import \"../../../assets/css/themify-icons.css\"\r\n+import Form from '../../../components/form/Form';\r\n+import Box from \"../../../components/box/Box\"\r\n+import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n+import Input from '../../../components/input/Input';\r\n+import Button from '../../../components/button/Button';\r\n+\r\n+import { useState } from 'react';\r\n+import { useGetData } from '../../../services/useGetData';\r\n+import { usePostData } from '../../../services/usePostData';\r\n+import { formatTimestamp } from '../../../hooks/formatDate';\r\n+import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n+import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n+\r\n+\r\n+\r\n+const CadastroVeiculo = () => {\r\n+\r\n+    const [marca, setMarca] = useState('')\r\n+    const [modelo, setModelo] = useState('')\r\n+    const [cor, setCor] = useState('')\r\n+    const [placa, setPlaca] = useState('')\r\n+    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n+    const [ano_modelo, setAnoModelo] = useState('')\r\n+    const [renavan, setRenavan] = useState('')\r\n+    const [unidade, setUnidade] = useState('')\r\n+    const [combustivel, setCombustivel] = useState([]);\r\n+    const [selectEstoque, setSelectEstoque] = useState('')\r\n+    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n+    const [cambio, setCambio] = useState('')\r\n+    const [quilometragem, setQuilometragem] = useState('')\r\n+    const [qtd_portas, setQtdPortas] = useState('')\r\n+\r\n+\r\n+    // Busca dados das lojas\r\n+    const { data: dadosLoja } = useGetData(`/lojas`)\r\n+    // Envia os dados do veículo\r\n+    const { loading, createData } = usePostData('/veiculos')\r\n+    const { createEstoqueExtra } = usePostData('/pulmao');\r\n+\r\n+    // Ordena as lojas por descrição\r\n+    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n+\r\n+\r\n+\r\n+    // Função para converter campos em CAIXA ALTA\r\n+    const toUpperFields = (obj, fields = []) => {\r\n+        const copy = { ...obj }\r\n+        fields.forEach((f) => {\r\n+            if (copy[f] !== undefined && copy[f] !== null) {\r\n+                copy[f] = String(copy[f]).toUpperCase()\r\n+            }\r\n+        })\r\n+        return copy\r\n+    }\r\n+\r\n+    // Função para lidar com o envio do formulário\r\n+    const handleSubmit = async (e) => {\r\n+        e.preventDefault()\r\n+\r\n+        const data_registro = formatTimestamp(new Date())\r\n+\r\n+        // Envia nome da loja no campo 'unidade'\r\n+        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n+\r\n+        console.log('Dados a serem enviados: ', dados)\r\n+        // Padroniza para caixa alta\r\n+        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n+        console.log('Dados a serem enviados:', dados);\r\n+\r\n+        // Validação de confirmação\r\n+        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n+        if (!confirmar) return;\r\n+\r\n+        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n+            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n+            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n+        } else {\r\n+            try {\r\n+                // Verifica se a placa já existe antes de enviar os dados\r\n+                const url = selectEstoque === 'pulmao'\r\n+                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n+                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n+\r\n+                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n+\r\n+                if (existente) {\r\n+                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n+                    return;\r\n+\r\n+                } else if (selectEstoque === 'pulmao') {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createEstoqueExtra(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+\r\n+                } else {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createData(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+                }\r\n+\r\n+            } catch (err) {\r\n+                console.error('Falha ao registrar o veículo: ', err);\r\n+                window.alert('Erro ao tentar registrar o veículo');\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+    // Função para lidar com a mudança de unidade\r\n+\r\n+    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n+    const handleUnidadeChange = (e) => {\r\n+        const selectedOption = e.target.selectedOptions[0]\r\n+        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n+        const descricao = selectedOption.getAttribute('data-descricao')\r\n+\r\n+        setUnidade(descricao)\r\n+        setCnpjUnidade(cnpj)\r\n+        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n+    }\r\n+\r\n+    return (\r\n+        <ContainerSecundario>\r\n+            <div className='container d-flex flex-column ' id=\"path\" >\r\n+                <div className=\"d-flex align-items-start \">\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n+                </div>\r\n+            </div>\r\n+            <div className=\"container d-flex justify-content-center card-container\">\r\n+                <Box>\r\n+                    <div className='panel-heading'>\r\n+                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n+                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n+                    </div>\r\n+                    <Form onSubmit={handleSubmit}>\r\n+                        <div className='col-12 col-md-3' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n+                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n+                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n+                                {lojasOrdenadas.map((loja) => (\r\n+                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n+                                        {loja.descricao}\r\n+                                    </option>\r\n+                                ))}\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className='col-12 col-md-4' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n+                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n+                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n+                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n+                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n+                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n+                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n+                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n+                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n+                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n+                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n+                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n+                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n+                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n+                                <option value=\"manual\">MANUAL</option>\r\n+                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n+                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n+                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n+                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n+                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"d-flex flex-row-reverse\">\r\n+                            <Button type=\"submit\" variant='primary'>\r\n+                                {loading && (\r\n+                                    <div className=\"spinner-grow spinner-grow-sm\" role=\"status\" > </div>\r\n+                                )}\r\n+                                ENVIAR\r\n+                            </Button>\r\n+                        </div>\r\n+                    </Form>\r\n+                </Box>\r\n+            </div>\r\n+        </ContainerSecundario>\r\n+\r\n+    )\r\n+}\r\n+\r\n+export default CadastroVeiculo\r\n"
                },
                {
                    "date": 1769805590740,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,270 @@\n+import \"../../../assets/css/thead.css\";\r\n+import \"../../../assets/css/themify-icons.css\"\r\n+import Form from '../../../components/form/Form';\r\n+import Box from \"../../../components/box/Box\"\r\n+import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n+import Input from '../../../components/input/Input';\r\n+import Button from '../../../components/button/Button';\r\n+\r\n+import { useState } from 'react';\r\n+import { useGetData } from '../../../services/useGetData';\r\n+import { usePostData } from '../../../services/usePostData';\r\n+import { formatTimestamp } from '../../../hooks/formatDate';\r\n+import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n+import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n+\r\n+\r\n+\r\n+const CadastroVeiculo = () => {\r\n+\r\n+    const [marca, setMarca] = useState('')\r\n+    const [modelo, setModelo] = useState('')\r\n+    const [cor, setCor] = useState('')\r\n+    const [placa, setPlaca] = useState('')\r\n+    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n+    const [ano_modelo, setAnoModelo] = useState('')\r\n+    const [renavan, setRenavan] = useState('')\r\n+    const [unidade, setUnidade] = useState('')\r\n+    const [combustivel, setCombustivel] = useState([]);\r\n+    const [selectEstoque, setSelectEstoque] = useState('')\r\n+    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n+    const [cambio, setCambio] = useState('')\r\n+    const [quilometragem, setQuilometragem] = useState('')\r\n+    const [qtd_portas, setQtdPortas] = useState('')\r\n+\r\n+\r\n+    // Busca dados das lojas\r\n+    const { data: dadosLoja } = useGetData(`/lojas`)\r\n+    // Envia os dados do veículo\r\n+    const { loading, createData } = usePostData('/veiculos')\r\n+    const { createEstoqueExtra } = usePostData('/pulmao');\r\n+\r\n+    // Ordena as lojas por descrição\r\n+    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n+\r\n+\r\n+\r\n+    // Função para converter campos em CAIXA ALTA\r\n+    const toUpperFields = (obj, fields = []) => {\r\n+        const copy = { ...obj }\r\n+        fields.forEach((f) => {\r\n+            if (copy[f] !== undefined && copy[f] !== null) {\r\n+                copy[f] = String(copy[f]).toUpperCase()\r\n+            }\r\n+        })\r\n+        return copy\r\n+    }\r\n+\r\n+    // Função para lidar com o envio do formulário\r\n+    const handleSubmit = async (e) => {\r\n+        e.preventDefault()\r\n+\r\n+        const data_registro = formatTimestamp(new Date())\r\n+\r\n+        // Envia nome da loja no campo 'unidade'\r\n+        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n+\r\n+        console.log('Dados a serem enviados: ', dados)\r\n+        // Padroniza para caixa alta\r\n+        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n+        console.log('Dados a serem enviados:', dados);\r\n+\r\n+        // Validação de confirmação\r\n+        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n+        if (!confirmar) return;\r\n+\r\n+        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n+            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n+            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n+        } else {\r\n+            try {\r\n+                // Verifica se a placa já existe antes de enviar os dados\r\n+                const url = selectEstoque === 'pulmao'\r\n+                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n+                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n+\r\n+                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n+\r\n+                if (existente) {\r\n+                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n+                    return;\r\n+\r\n+                } else if (selectEstoque === 'pulmao') {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createEstoqueExtra(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+\r\n+                } else {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createData(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+                }\r\n+\r\n+            } catch (err) {\r\n+                console.error('Falha ao registrar o veículo: ', err);\r\n+                window.alert('Erro ao tentar registrar o veículo');\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+    // Função para lidar com a mudança de unidade\r\n+\r\n+    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n+    const handleUnidadeChange = (e) => {\r\n+        const selectedOption = e.target.selectedOptions[0]\r\n+        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n+        const descricao = selectedOption.getAttribute('data-descricao')\r\n+\r\n+        setUnidade(descricao)\r\n+        setCnpjUnidade(cnpj)\r\n+        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n+    }\r\n+\r\n+    return (\r\n+        <ContainerSecundario>\r\n+            <div className='container d-flex flex-column ' id=\"path\" >\r\n+                <div className=\"d-flex align-items-start \">\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n+                </div>\r\n+            </div>\r\n+            <div className=\"container d-flex justify-content-center card-container\">\r\n+                <Box>\r\n+                    <div className='panel-heading'>\r\n+                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n+                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n+                    </div>\r\n+                    <Form onSubmit={handleSubmit}>\r\n+                        <div className='col-12 col-md-3' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n+                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n+                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n+                                {lojasOrdenadas.map((loja) => (\r\n+                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n+                                        {loja.descricao}\r\n+                                    </option>\r\n+                                ))}\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className='col-12 col-md-4' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n+                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n+                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n+                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n+                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n+                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n+                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n+                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n+                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n+                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n+                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n+                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n+                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n+                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n+                                <option value=\"manual\">MANUAL</option>\r\n+                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n+                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n+                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n+                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n+                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"d-flex flex-row-reverse\">\r\n+                            <Button type=\"submit\" variant='primary'>\r\n+                                {loading && (\r\n+                                    <div className=\"spinner-grow spinner-grow-sm \" role=\"status\" > </div>\r\n+                                )}\r\n+                                ENVIAR\r\n+                            </Button>\r\n+                        </div>\r\n+                    </Form>\r\n+                </Box>\r\n+            </div>\r\n+        </ContainerSecundario>\r\n+\r\n+    )\r\n+}\r\n+\r\n+export default CadastroVeiculo\r\n"
                },
                {
                    "date": 1769805606969,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,270 @@\n+import \"../../../assets/css/thead.css\";\r\n+import \"../../../assets/css/themify-icons.css\"\r\n+import Form from '../../../components/form/Form';\r\n+import Box from \"../../../components/box/Box\"\r\n+import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n+import Input from '../../../components/input/Input';\r\n+import Button from '../../../components/button/Button';\r\n+\r\n+import { useState } from 'react';\r\n+import { useGetData } from '../../../services/useGetData';\r\n+import { usePostData } from '../../../services/usePostData';\r\n+import { formatTimestamp } from '../../../hooks/formatDate';\r\n+import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n+import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n+\r\n+\r\n+\r\n+const CadastroVeiculo = () => {\r\n+\r\n+    const [marca, setMarca] = useState('')\r\n+    const [modelo, setModelo] = useState('')\r\n+    const [cor, setCor] = useState('')\r\n+    const [placa, setPlaca] = useState('')\r\n+    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n+    const [ano_modelo, setAnoModelo] = useState('')\r\n+    const [renavan, setRenavan] = useState('')\r\n+    const [unidade, setUnidade] = useState('')\r\n+    const [combustivel, setCombustivel] = useState([]);\r\n+    const [selectEstoque, setSelectEstoque] = useState('')\r\n+    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n+    const [cambio, setCambio] = useState('')\r\n+    const [quilometragem, setQuilometragem] = useState('')\r\n+    const [qtd_portas, setQtdPortas] = useState('')\r\n+\r\n+\r\n+    // Busca dados das lojas\r\n+    const { data: dadosLoja } = useGetData(`/lojas`)\r\n+    // Envia os dados do veículo\r\n+    const { loading, createData } = usePostData('/veiculos')\r\n+    const { createEstoqueExtra } = usePostData('/pulmao');\r\n+\r\n+    // Ordena as lojas por descrição\r\n+    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n+\r\n+\r\n+\r\n+    // Função para converter campos em CAIXA ALTA\r\n+    const toUpperFields = (obj, fields = []) => {\r\n+        const copy = { ...obj }\r\n+        fields.forEach((f) => {\r\n+            if (copy[f] !== undefined && copy[f] !== null) {\r\n+                copy[f] = String(copy[f]).toUpperCase()\r\n+            }\r\n+        })\r\n+        return copy\r\n+    }\r\n+\r\n+    // Função para lidar com o envio do formulário\r\n+    const handleSubmit = async (e) => {\r\n+        e.preventDefault()\r\n+\r\n+        const data_registro = formatTimestamp(new Date())\r\n+\r\n+        // Envia nome da loja no campo 'unidade'\r\n+        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n+\r\n+        console.log('Dados a serem enviados: ', dados)\r\n+        // Padroniza para caixa alta\r\n+        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n+        console.log('Dados a serem enviados:', dados);\r\n+\r\n+        // Validação de confirmação\r\n+        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n+        if (!confirmar) return;\r\n+\r\n+        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n+            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n+            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n+        } else {\r\n+            try {\r\n+                // Verifica se a placa já existe antes de enviar os dados\r\n+                const url = selectEstoque === 'pulmao'\r\n+                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n+                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n+\r\n+                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n+\r\n+                if (existente) {\r\n+                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n+                    return;\r\n+\r\n+                } else if (selectEstoque === 'pulmao') {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createEstoqueExtra(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+\r\n+                } else {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createData(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+                }\r\n+\r\n+            } catch (err) {\r\n+                console.error('Falha ao registrar o veículo: ', err);\r\n+                window.alert('Erro ao tentar registrar o veículo');\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+    // Função para lidar com a mudança de unidade\r\n+\r\n+    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n+    const handleUnidadeChange = (e) => {\r\n+        const selectedOption = e.target.selectedOptions[0]\r\n+        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n+        const descricao = selectedOption.getAttribute('data-descricao')\r\n+\r\n+        setUnidade(descricao)\r\n+        setCnpjUnidade(cnpj)\r\n+        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n+    }\r\n+\r\n+    return (\r\n+        <ContainerSecundario>\r\n+            <div className='container d-flex flex-column ' id=\"path\" >\r\n+                <div className=\"d-flex align-items-start \">\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n+                </div>\r\n+            </div>\r\n+            <div className=\"container d-flex justify-content-center card-container\">\r\n+                <Box>\r\n+                    <div className='panel-heading'>\r\n+                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n+                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n+                    </div>\r\n+                    <Form onSubmit={handleSubmit}>\r\n+                        <div className='col-12 col-md-3' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n+                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n+                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n+                                {lojasOrdenadas.map((loja) => (\r\n+                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n+                                        {loja.descricao}\r\n+                                    </option>\r\n+                                ))}\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className='col-12 col-md-4' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n+                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n+                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n+                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n+                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n+                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n+                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n+                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n+                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n+                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n+                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n+                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n+                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n+                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n+                                <option value=\"manual\">MANUAL</option>\r\n+                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n+                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n+                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n+                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n+                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"d-flex flex-row-reverse\">\r\n+                            <Button type=\"submit\" variant='primary'>\r\n+                                {loading && (\r\n+                                    <div className=\"spinner-grow spinner-grow-sm d-flex flex-row-reverse\" role=\"status\" > </div>\r\n+                                )}\r\n+                                ENVIAR\r\n+                            </Button>\r\n+                        </div>\r\n+                    </Form>\r\n+                </Box>\r\n+            </div>\r\n+        </ContainerSecundario>\r\n+\r\n+    )\r\n+}\r\n+\r\n+export default CadastroVeiculo\r\n"
                },
                {
                    "date": 1769805647825,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -253,9 +253,9 @@\n                         </div>\r\n                         <div className=\"d-flex flex-row-reverse\">\r\n                             <Button type=\"submit\" variant='primary'>\r\n                                 {loading && (\r\n-                                    <div className=\"spinner-grow spinner-grow-sm d-flex flex-row-reverse\" role=\"status\" > </div>\r\n+                                    <div className=\"spinner-grow spinner-grow-sm flex-row-start\" role=\"status\" > </div>\r\n                                 )}\r\n                                 ENVIAR\r\n                             </Button>\r\n                         </div>\r\n@@ -267,3227 +267,4 @@\n     )\r\n }\r\n \r\n export default CadastroVeiculo\r\n-import \"../../../assets/css/thead.css\";\r\n-import \"../../../assets/css/themify-icons.css\"\r\n-import Form from '../../../components/form/Form';\r\n-import Box from \"../../../components/box/Box\"\r\n-import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n-import Input from '../../../components/input/Input';\r\n-import Button from '../../../components/button/Button';\r\n-\r\n-import { useState } from 'react';\r\n-import { useGetData } from '../../../services/useGetData';\r\n-import { usePostData } from '../../../services/usePostData';\r\n-import { formatTimestamp } from '../../../hooks/formatDate';\r\n-import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n-import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n-\r\n-\r\n-\r\n-const CadastroVeiculo = () => {\r\n-\r\n-    const [marca, setMarca] = useState('')\r\n-    const [modelo, setModelo] = useState('')\r\n-    const [cor, setCor] = useState('')\r\n-    const [placa, setPlaca] = useState('')\r\n-    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n-    const [ano_modelo, setAnoModelo] = useState('')\r\n-    const [renavan, setRenavan] = useState('')\r\n-    const [unidade, setUnidade] = useState('')\r\n-    const [combustivel, setCombustivel] = useState([]);\r\n-    const [selectEstoque, setSelectEstoque] = useState('')\r\n-    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n-    const [cambio, setCambio] = useState('')\r\n-    const [quilometragem, setQuilometragem] = useState('')\r\n-    const [qtd_portas, setQtdPortas] = useState('')\r\n-\r\n-\r\n-    // Busca dados das lojas\r\n-    const { data: dadosLoja } = useGetData(`/lojas`)\r\n-    // Envia os dados do veículo\r\n-    const { loading, createData } = usePostData('/veiculos')\r\n-    const { createEstoqueExtra } = usePostData('/pulmao');\r\n-\r\n-    // Ordena as lojas por descrição\r\n-    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n-\r\n-\r\n-\r\n-    // Função para converter campos em CAIXA ALTA\r\n-    const toUpperFields = (obj, fields = []) => {\r\n-        const copy = { ...obj }\r\n-        fields.forEach((f) => {\r\n-            if (copy[f] !== undefined && copy[f] !== null) {\r\n-                copy[f] = String(copy[f]).toUpperCase()\r\n-            }\r\n-        })\r\n-        return copy\r\n-    }\r\n-\r\n-    // Função para lidar com o envio do formulário\r\n-    const handleSubmit = async (e) => {\r\n-        e.preventDefault()\r\n-\r\n-        const data_registro = formatTimestamp(new Date())\r\n-\r\n-        // Envia nome da loja no campo 'unidade'\r\n-        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n-\r\n-        console.log('Dados a serem enviados: ', dados)\r\n-        // Padroniza para caixa alta\r\n-        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n-        console.log('Dados a serem enviados:', dados);\r\n-\r\n-        // Validação de confirmação\r\n-        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n-        if (!confirmar) return;\r\n-\r\n-        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n-            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n-            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n-        } else {\r\n-            try {\r\n-                // Verifica se a placa já existe antes de enviar os dados\r\n-                const url = selectEstoque === 'pulmao'\r\n-                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n-                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n-\r\n-                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n-\r\n-                if (existente) {\r\n-                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n-                    return;\r\n-\r\n-                } else if (selectEstoque === 'pulmao') {\r\n-                    // Busca a quantidade de veículos na unidade selecionada\r\n-                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n-                    const data = await responseUnidade.json();\r\n-                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n-                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n-\r\n-                    // Busca a quantidade total de vagas da loja\r\n-                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n-                    const dataLoja = await responseLoja.json();\r\n-                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n-                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n-                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n-\r\n-                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n-                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n-                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n-\r\n-                    // Só permite o cadastro se houver vagas disponíveis\r\n-                    if (vagasDisponiveis > 0) {\r\n-                        const dadosUpper = toUpperCaseData(dados);\r\n-                        await createEstoqueExtra(dadosUpper);\r\n-\r\n-                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n-                        //window.location.reload();\r\n-                    } else {\r\n-                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n-                    }\r\n-\r\n-                } else {\r\n-                    // Busca a quantidade de veículos na unidade selecionada\r\n-                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n-                    const data = await responseUnidade.json();\r\n-                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n-                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n-\r\n-                    // Busca a quantidade total de vagas da loja\r\n-                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n-                    const dataLoja = await responseLoja.json();\r\n-                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n-                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n-                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n-\r\n-                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n-                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n-                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n-\r\n-                    // Só permite o cadastro se houver vagas disponíveis\r\n-                    if (vagasDisponiveis > 0) {\r\n-                        const dadosUpper = toUpperCaseData(dados);\r\n-                        await createData(dadosUpper);\r\n-\r\n-                        window.alert('Veículo cadastrado com sucesso');\r\n-                        //window.location.reload();\r\n-                    } else {\r\n-                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n-                    }\r\n-                }\r\n-\r\n-            } catch (err) {\r\n-                console.error('Falha ao registrar o veículo: ', err);\r\n-                window.alert('Erro ao tentar registrar o veículo');\r\n-            }\r\n-        }\r\n-    }\r\n-\r\n-    // Função para lidar com a mudança de unidade\r\n-\r\n-    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n-    const handleUnidadeChange = (e) => {\r\n-        const selectedOption = e.target.selectedOptions[0]\r\n-        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n-        const descricao = selectedOption.getAttribute('data-descricao')\r\n-\r\n-        setUnidade(descricao)\r\n-        setCnpjUnidade(cnpj)\r\n-        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n-    }\r\n-\r\n-    return (\r\n-        <ContainerSecundario>\r\n-            <div className='container d-flex flex-column ' id=\"path\" >\r\n-                <div className=\"d-flex align-items-start \">\r\n-                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n-                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n-                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n-                </div>\r\n-            </div>\r\n-            <div className=\"container d-flex justify-content-center card-container\">\r\n-                <Box>\r\n-                    <div className='panel-heading'>\r\n-                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n-                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n-                    </div>\r\n-                    <Form onSubmit={handleSubmit}>\r\n-                        <div className='col-12 col-md-3' id='select-all'>\r\n-                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n-                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n-                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n-                                {lojasOrdenadas.map((loja) => (\r\n-                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n-                                        {loja.descricao}\r\n-                                    </option>\r\n-                                ))}\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className='col-12 col-md-4' id='select-all'>\r\n-                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n-                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n-                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n-                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n-                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n-                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n-                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n-                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\">\r\n-                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n-                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n-                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n-                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n-                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n-                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n-                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n-                                <option value=\"manual\">MANUAL</option>\r\n-                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\">\r\n-                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n-                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n-                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n-                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n-                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"d-flex flex-row-reverse\">\r\n-                            <Button type=\"submit\" variant='primary'>\r\n-                                {loading && (\r\n-                                    <div className=\"spinner-grow spinner-grow-sm \" role=\"status\" > </div>\r\n-                                )}\r\n-                                ENVIAR\r\n-                            </Button>\r\n-                        </div>\r\n-                    </Form>\r\n-                </Box>\r\n-            </div>\r\n-        </ContainerSecundario>\r\n-\r\n-    )\r\n-}\r\n-\r\n-export default CadastroVeiculo\r\n-import \"../../../assets/css/thead.css\";\r\n-import \"../../../assets/css/themify-icons.css\"\r\n-import Form from '../../../components/form/Form';\r\n-import Box from \"../../../components/box/Box\"\r\n-import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n-import Input from '../../../components/input/Input';\r\n-import Button from '../../../components/button/Button';\r\n-\r\n-import { useState } from 'react';\r\n-import { useGetData } from '../../../services/useGetData';\r\n-import { usePostData } from '../../../services/usePostData';\r\n-import { formatTimestamp } from '../../../hooks/formatDate';\r\n-import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n-import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n-\r\n-\r\n-\r\n-const CadastroVeiculo = () => {\r\n-\r\n-    const [marca, setMarca] = useState('')\r\n-    const [modelo, setModelo] = useState('')\r\n-    const [cor, setCor] = useState('')\r\n-    const [placa, setPlaca] = useState('')\r\n-    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n-    const [ano_modelo, setAnoModelo] = useState('')\r\n-    const [renavan, setRenavan] = useState('')\r\n-    const [unidade, setUnidade] = useState('')\r\n-    const [combustivel, setCombustivel] = useState([]);\r\n-    const [selectEstoque, setSelectEstoque] = useState('')\r\n-    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n-    const [cambio, setCambio] = useState('')\r\n-    const [quilometragem, setQuilometragem] = useState('')\r\n-    const [qtd_portas, setQtdPortas] = useState('')\r\n-\r\n-\r\n-    // Busca dados das lojas\r\n-    const { data: dadosLoja } = useGetData(`/lojas`)\r\n-    // Envia os dados do veículo\r\n-    const { loading, createData } = usePostData('/veiculos')\r\n-    const { createEstoqueExtra } = usePostData('/pulmao');\r\n-\r\n-    // Ordena as lojas por descrição\r\n-    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n-\r\n-\r\n-\r\n-    // Função para converter campos em CAIXA ALTA\r\n-    const toUpperFields = (obj, fields = []) => {\r\n-        const copy = { ...obj }\r\n-        fields.forEach((f) => {\r\n-            if (copy[f] !== undefined && copy[f] !== null) {\r\n-                copy[f] = String(copy[f]).toUpperCase()\r\n-            }\r\n-        })\r\n-        return copy\r\n-    }\r\n-\r\n-    // Função para lidar com o envio do formulário\r\n-    const handleSubmit = async (e) => {\r\n-        e.preventDefault()\r\n-\r\n-        const data_registro = formatTimestamp(new Date())\r\n-\r\n-        // Envia nome da loja no campo 'unidade'\r\n-        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n-\r\n-        console.log('Dados a serem enviados: ', dados)\r\n-        // Padroniza para caixa alta\r\n-        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n-        console.log('Dados a serem enviados:', dados);\r\n-\r\n-        // Validação de confirmação\r\n-        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n-        if (!confirmar) return;\r\n-\r\n-        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n-            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n-            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n-        } else {\r\n-            try {\r\n-                // Verifica se a placa já existe antes de enviar os dados\r\n-                const url = selectEstoque === 'pulmao'\r\n-                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n-                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n-\r\n-                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n-\r\n-                if (existente) {\r\n-                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n-                    return;\r\n-\r\n-                } else if (selectEstoque === 'pulmao') {\r\n-                    // Busca a quantidade de veículos na unidade selecionada\r\n-                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n-                    const data = await responseUnidade.json();\r\n-                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n-                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n-\r\n-                    // Busca a quantidade total de vagas da loja\r\n-                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n-                    const dataLoja = await responseLoja.json();\r\n-                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n-                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n-                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n-\r\n-                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n-                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n-                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n-\r\n-                    // Só permite o cadastro se houver vagas disponíveis\r\n-                    if (vagasDisponiveis > 0) {\r\n-                        const dadosUpper = toUpperCaseData(dados);\r\n-                        await createEstoqueExtra(dadosUpper);\r\n-\r\n-                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n-                        //window.location.reload();\r\n-                    } else {\r\n-                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n-                    }\r\n-\r\n-                } else {\r\n-                    // Busca a quantidade de veículos na unidade selecionada\r\n-                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n-                    const data = await responseUnidade.json();\r\n-                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n-                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n-\r\n-                    // Busca a quantidade total de vagas da loja\r\n-                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n-                    const dataLoja = await responseLoja.json();\r\n-                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n-                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n-                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n-\r\n-                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n-                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n-                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n-\r\n-                    // Só permite o cadastro se houver vagas disponíveis\r\n-                    if (vagasDisponiveis > 0) {\r\n-                        const dadosUpper = toUpperCaseData(dados);\r\n-                        await createData(dadosUpper);\r\n-\r\n-                        window.alert('Veículo cadastrado com sucesso');\r\n-                        //window.location.reload();\r\n-                    } else {\r\n-                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n-                    }\r\n-                }\r\n-\r\n-            } catch (err) {\r\n-                console.error('Falha ao registrar o veículo: ', err);\r\n-                window.alert('Erro ao tentar registrar o veículo');\r\n-            }\r\n-        }\r\n-    }\r\n-\r\n-    // Função para lidar com a mudança de unidade\r\n-\r\n-    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n-    const handleUnidadeChange = (e) => {\r\n-        const selectedOption = e.target.selectedOptions[0]\r\n-        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n-        const descricao = selectedOption.getAttribute('data-descricao')\r\n-\r\n-        setUnidade(descricao)\r\n-        setCnpjUnidade(cnpj)\r\n-        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n-    }\r\n-\r\n-    return (\r\n-        <ContainerSecundario>\r\n-            <div className='container d-flex flex-column ' id=\"path\" >\r\n-                <div className=\"d-flex align-items-start \">\r\n-                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n-                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n-                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n-                </div>\r\n-            </div>\r\n-            <div className=\"container d-flex justify-content-center card-container\">\r\n-                <Box>\r\n-                    <div className='panel-heading'>\r\n-                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n-                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n-                    </div>\r\n-                    <Form onSubmit={handleSubmit}>\r\n-                        <div className='col-12 col-md-3' id='select-all'>\r\n-                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n-                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n-                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n-                                {lojasOrdenadas.map((loja) => (\r\n-                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n-                                        {loja.descricao}\r\n-                                    </option>\r\n-                                ))}\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className='col-12 col-md-4' id='select-all'>\r\n-                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n-                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n-                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n-                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n-                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n-                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n-                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n-                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\">\r\n-                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n-                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n-                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n-                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n-                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n-                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n-                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n-                                <option value=\"manual\">MANUAL</option>\r\n-                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\">\r\n-                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n-                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n-                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n-                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n-                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"d-flex flex-row-reverse\">\r\n-                            <Button type=\"submit\" variant='primary'>\r\n-                                {loading && (\r\n-                                    <div className=\"spinner-grow spinner-grow-sm\" role=\"status\" > </div>\r\n-                                )}\r\n-                                ENVIAR\r\n-                            </Button>\r\n-                        </div>\r\n-                    </Form>\r\n-                </Box>\r\n-            </div>\r\n-        </ContainerSecundario>\r\n-\r\n-    )\r\n-}\r\n-\r\n-export default CadastroVeiculo\r\n-import \"../../../assets/css/thead.css\";\r\n-import \"../../../assets/css/themify-icons.css\"\r\n-import Form from '../../../components/form/Form';\r\n-import Box from \"../../../components/box/Box\"\r\n-import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n-import Input from '../../../components/input/Input';\r\n-import Button from '../../../components/button/Button';\r\n-\r\n-import { useState } from 'react';\r\n-import { useGetData } from '../../../services/useGetData';\r\n-import { usePostData } from '../../../services/usePostData';\r\n-import { formatTimestamp } from '../../../hooks/formatDate';\r\n-import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n-import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n-\r\n-\r\n-\r\n-const CadastroVeiculo = () => {\r\n-\r\n-    const [marca, setMarca] = useState('')\r\n-    const [modelo, setModelo] = useState('')\r\n-    const [cor, setCor] = useState('')\r\n-    const [placa, setPlaca] = useState('')\r\n-    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n-    const [ano_modelo, setAnoModelo] = useState('')\r\n-    const [renavan, setRenavan] = useState('')\r\n-    const [unidade, setUnidade] = useState('')\r\n-    const [combustivel, setCombustivel] = useState([]);\r\n-    const [selectEstoque, setSelectEstoque] = useState('')\r\n-    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n-    const [cambio, setCambio] = useState('')\r\n-    const [quilometragem, setQuilometragem] = useState('')\r\n-    const [qtd_portas, setQtdPortas] = useState('')\r\n-\r\n-\r\n-    // Busca dados das lojas\r\n-    const { data: dadosLoja } = useGetData(`/lojas`)\r\n-    // Envia os dados do veículo\r\n-    const { loading, createData } = usePostData('/veiculos')\r\n-    const { createEstoqueExtra } = usePostData('/pulmao');\r\n-\r\n-    // Ordena as lojas por descrição\r\n-    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n-\r\n-\r\n-\r\n-    // Função para converter campos em CAIXA ALTA\r\n-    const toUpperFields = (obj, fields = []) => {\r\n-        const copy = { ...obj }\r\n-        fields.forEach((f) => {\r\n-            if (copy[f] !== undefined && copy[f] !== null) {\r\n-                copy[f] = String(copy[f]).toUpperCase()\r\n-            }\r\n-        })\r\n-        return copy\r\n-    }\r\n-\r\n-    // Função para lidar com o envio do formulário\r\n-    const handleSubmit = async (e) => {\r\n-        e.preventDefault()\r\n-\r\n-        const data_registro = formatTimestamp(new Date())\r\n-\r\n-        // Envia nome da loja no campo 'unidade'\r\n-        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n-\r\n-        console.log('Dados a serem enviados: ', dados)\r\n-        // Padroniza para caixa alta\r\n-        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n-        console.log('Dados a serem enviados:', dados);\r\n-\r\n-        // Validação de confirmação\r\n-        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n-        if (!confirmar) return;\r\n-\r\n-        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n-            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n-            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n-        } else {\r\n-            try {\r\n-                // Verifica se a placa já existe antes de enviar os dados\r\n-                const url = selectEstoque === 'pulmao'\r\n-                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n-                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n-\r\n-                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n-\r\n-                if (existente) {\r\n-                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n-                    return;\r\n-\r\n-                } else if (selectEstoque === 'pulmao') {\r\n-                    // Busca a quantidade de veículos na unidade selecionada\r\n-                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n-                    const data = await responseUnidade.json();\r\n-                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n-                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n-\r\n-                    // Busca a quantidade total de vagas da loja\r\n-                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n-                    const dataLoja = await responseLoja.json();\r\n-                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n-                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n-                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n-\r\n-                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n-                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n-                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n-\r\n-                    // Só permite o cadastro se houver vagas disponíveis\r\n-                    if (vagasDisponiveis > 0) {\r\n-                        const dadosUpper = toUpperCaseData(dados);\r\n-                        await createEstoqueExtra(dadosUpper);\r\n-\r\n-                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n-                        //window.location.reload();\r\n-                    } else {\r\n-                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n-                    }\r\n-\r\n-                } else {\r\n-                    // Busca a quantidade de veículos na unidade selecionada\r\n-                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n-                    const data = await responseUnidade.json();\r\n-                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n-                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n-\r\n-                    // Busca a quantidade total de vagas da loja\r\n-                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n-                    const dataLoja = await responseLoja.json();\r\n-                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n-                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n-                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n-\r\n-                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n-                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n-                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n-\r\n-                    // Só permite o cadastro se houver vagas disponíveis\r\n-                    if (vagasDisponiveis > 0) {\r\n-                        const dadosUpper = toUpperCaseData(dados);\r\n-                        await createData(dadosUpper);\r\n-\r\n-                        window.alert('Veículo cadastrado com sucesso');\r\n-                        //window.location.reload();\r\n-                    } else {\r\n-                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n-                    }\r\n-                }\r\n-\r\n-            } catch (err) {\r\n-                console.error('Falha ao registrar o veículo: ', err);\r\n-                window.alert('Erro ao tentar registrar o veículo');\r\n-            }\r\n-        }\r\n-    }\r\n-\r\n-    // Função para lidar com a mudança de unidade\r\n-\r\n-    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n-    const handleUnidadeChange = (e) => {\r\n-        const selectedOption = e.target.selectedOptions[0]\r\n-        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n-        const descricao = selectedOption.getAttribute('data-descricao')\r\n-\r\n-        setUnidade(descricao)\r\n-        setCnpjUnidade(cnpj)\r\n-        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n-    }\r\n-\r\n-    return (\r\n-        <ContainerSecundario>\r\n-            <div className='container d-flex flex-column ' id=\"path\" >\r\n-                <div className=\"d-flex align-items-start \">\r\n-                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n-                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n-                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n-                </div>\r\n-            </div>\r\n-            <div className=\"container d-flex justify-content-center card-container\">\r\n-                <Box>\r\n-                    <div className='panel-heading'>\r\n-                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n-                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n-                    </div>\r\n-                    <Form onSubmit={handleSubmit}>\r\n-                        <div className='col-12 col-md-3' id='select-all'>\r\n-                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n-                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n-                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n-                                {lojasOrdenadas.map((loja) => (\r\n-                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n-                                        {loja.descricao}\r\n-                                    </option>\r\n-                                ))}\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className='col-12 col-md-4' id='select-all'>\r\n-                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n-                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n-                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n-                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n-                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n-                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n-                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n-                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\">\r\n-                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n-                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n-                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n-                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n-                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n-                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n-                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n-                                <option value=\"manual\">MANUAL</option>\r\n-                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\">\r\n-                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n-                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n-                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n-                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n-                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"d-flex flex-row-reverse\">\r\n-                            <Button type=\"submit\" variant='primary'>\r\n-                                {loading && (\r\n-                                    <div className=\"spinner-border\" role=\"status\" he> </div>\r\n-                                )}\r\n-                                ENVIAR\r\n-                            </Button>\r\n-                        </div>\r\n-                    </Form>\r\n-                </Box>\r\n-            </div>\r\n-        </ContainerSecundario>\r\n-\r\n-    )\r\n-}\r\n-\r\n-export default CadastroVeiculo\r\n-import \"../../../assets/css/thead.css\";\r\n-import \"../../../assets/css/themify-icons.css\"\r\n-import Form from '../../../components/form/Form';\r\n-import Box from \"../../../components/box/Box\"\r\n-import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n-import Input from '../../../components/input/Input';\r\n-import Button from '../../../components/button/Button';\r\n-\r\n-import { useState } from 'react';\r\n-import { useGetData } from '../../../services/useGetData';\r\n-import { usePostData } from '../../../services/usePostData';\r\n-import { formatTimestamp } from '../../../hooks/formatDate';\r\n-import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n-import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n-\r\n-\r\n-\r\n-const CadastroVeiculo = () => {\r\n-\r\n-    const [marca, setMarca] = useState('')\r\n-    const [modelo, setModelo] = useState('')\r\n-    const [cor, setCor] = useState('')\r\n-    const [placa, setPlaca] = useState('')\r\n-    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n-    const [ano_modelo, setAnoModelo] = useState('')\r\n-    const [renavan, setRenavan] = useState('')\r\n-    const [unidade, setUnidade] = useState('')\r\n-    const [combustivel, setCombustivel] = useState([]);\r\n-    const [selectEstoque, setSelectEstoque] = useState('')\r\n-    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n-    const [cambio, setCambio] = useState('')\r\n-    const [quilometragem, setQuilometragem] = useState('')\r\n-    const [qtd_portas, setQtdPortas] = useState('')\r\n-\r\n-\r\n-    // Busca dados das lojas\r\n-    const { data: dadosLoja } = useGetData(`/lojas`)\r\n-    // Envia os dados do veículo\r\n-    const { loading, createData } = usePostData('/veiculos')\r\n-    const { createEstoqueExtra } = usePostData('/pulmao');\r\n-\r\n-    // Ordena as lojas por descrição\r\n-    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n-\r\n-\r\n-\r\n-    // Função para converter campos em CAIXA ALTA\r\n-    const toUpperFields = (obj, fields = []) => {\r\n-        const copy = { ...obj }\r\n-        fields.forEach((f) => {\r\n-            if (copy[f] !== undefined && copy[f] !== null) {\r\n-                copy[f] = String(copy[f]).toUpperCase()\r\n-            }\r\n-        })\r\n-        return copy\r\n-    }\r\n-\r\n-    // Função para lidar com o envio do formulário\r\n-    const handleSubmit = async (e) => {\r\n-        e.preventDefault()\r\n-\r\n-        const data_registro = formatTimestamp(new Date())\r\n-\r\n-        // Envia nome da loja no campo 'unidade'\r\n-        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n-\r\n-        console.log('Dados a serem enviados: ', dados)\r\n-        // Padroniza para caixa alta\r\n-        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n-        console.log('Dados a serem enviados:', dados);\r\n-\r\n-        // Validação de confirmação\r\n-        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n-        if (!confirmar) return;\r\n-\r\n-        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n-            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n-            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n-        } else {\r\n-            try {\r\n-                // Verifica se a placa já existe antes de enviar os dados\r\n-                const url = selectEstoque === 'pulmao'\r\n-                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n-                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n-\r\n-                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n-\r\n-                if (existente) {\r\n-                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n-                    return;\r\n-\r\n-                } else if (selectEstoque === 'pulmao') {\r\n-                    // Busca a quantidade de veículos na unidade selecionada\r\n-                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n-                    const data = await responseUnidade.json();\r\n-                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n-                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n-\r\n-                    // Busca a quantidade total de vagas da loja\r\n-                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n-                    const dataLoja = await responseLoja.json();\r\n-                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n-                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n-                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n-\r\n-                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n-                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n-                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n-\r\n-                    // Só permite o cadastro se houver vagas disponíveis\r\n-                    if (vagasDisponiveis > 0) {\r\n-                        const dadosUpper = toUpperCaseData(dados);\r\n-                        await createEstoqueExtra(dadosUpper);\r\n-\r\n-                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n-                        //window.location.reload();\r\n-                    } else {\r\n-                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n-                    }\r\n-\r\n-                } else {\r\n-                    // Busca a quantidade de veículos na unidade selecionada\r\n-                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n-                    const data = await responseUnidade.json();\r\n-                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n-                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n-\r\n-                    // Busca a quantidade total de vagas da loja\r\n-                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n-                    const dataLoja = await responseLoja.json();\r\n-                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n-                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n-                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n-\r\n-                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n-                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n-                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n-\r\n-                    // Só permite o cadastro se houver vagas disponíveis\r\n-                    if (vagasDisponiveis > 0) {\r\n-                        const dadosUpper = toUpperCaseData(dados);\r\n-                        await createData(dadosUpper);\r\n-\r\n-                        window.alert('Veículo cadastrado com sucesso');\r\n-                        //window.location.reload();\r\n-                    } else {\r\n-                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n-                    }\r\n-                }\r\n-\r\n-            } catch (err) {\r\n-                console.error('Falha ao registrar o veículo: ', err);\r\n-                window.alert('Erro ao tentar registrar o veículo');\r\n-            }\r\n-        }\r\n-    }\r\n-\r\n-    // Função para lidar com a mudança de unidade\r\n-\r\n-    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n-    const handleUnidadeChange = (e) => {\r\n-        const selectedOption = e.target.selectedOptions[0]\r\n-        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n-        const descricao = selectedOption.getAttribute('data-descricao')\r\n-\r\n-        setUnidade(descricao)\r\n-        setCnpjUnidade(cnpj)\r\n-        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n-    }\r\n-\r\n-    return (\r\n-        <ContainerSecundario>\r\n-            <div className='container d-flex flex-column ' id=\"path\" >\r\n-                <div className=\"d-flex align-items-start \">\r\n-                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n-                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n-                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n-                </div>\r\n-            </div>\r\n-            <div className=\"container d-flex justify-content-center card-container\">\r\n-                <Box>\r\n-                    <div className='panel-heading'>\r\n-                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n-                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n-                    </div>\r\n-                    <Form onSubmit={handleSubmit}>\r\n-                        <div className='col-12 col-md-3' id='select-all'>\r\n-                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n-                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n-                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n-                                {lojasOrdenadas.map((loja) => (\r\n-                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n-                                        {loja.descricao}\r\n-                                    </option>\r\n-                                ))}\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className='col-12 col-md-4' id='select-all'>\r\n-                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n-                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n-                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n-                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n-                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n-                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n-                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n-                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\">\r\n-                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n-                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n-                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n-                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n-                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n-                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n-                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n-                                <option value=\"manual\">MANUAL</option>\r\n-                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\">\r\n-                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n-                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n-                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n-                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n-                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"d-flex flex-row-reverse\">\r\n-                            <Button type=\"submit\" variant='primary'>\r\n-                            {loading && (\r\n-                                <div className=\"spinner-border\" role=\"status\" > </div>\r\n-                            )}\r\n-                                ENVIAR\r\n-                            </Button>\r\n-                        </div>\r\n-                    </Form>\r\n-                </Box>\r\n-            </div>\r\n-        </ContainerSecundario>\r\n-\r\n-    )\r\n-}\r\n-\r\n-export default CadastroVeiculo\r\n-import \"../../../assets/css/thead.css\";\r\n-import \"../../../assets/css/themify-icons.css\"\r\n-import Form from '../../../components/form/Form';\r\n-import Box from \"../../../components/box/Box\"\r\n-import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n-import Input from '../../../components/input/Input';\r\n-import Button from '../../../components/button/Button';\r\n-\r\n-import { useState } from 'react';\r\n-import { useGetData } from '../../../services/useGetData';\r\n-import { usePostData } from '../../../services/usePostData';\r\n-import { formatTimestamp } from '../../../hooks/formatDate';\r\n-import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n-import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n-\r\n-\r\n-\r\n-const CadastroVeiculo = () => {\r\n-\r\n-    const [marca, setMarca] = useState('')\r\n-    const [modelo, setModelo] = useState('')\r\n-    const [cor, setCor] = useState('')\r\n-    const [placa, setPlaca] = useState('')\r\n-    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n-    const [ano_modelo, setAnoModelo] = useState('')\r\n-    const [renavan, setRenavan] = useState('')\r\n-    const [unidade, setUnidade] = useState('')\r\n-    const [combustivel, setCombustivel] = useState([]);\r\n-    const [selectEstoque, setSelectEstoque] = useState('')\r\n-    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n-    const [cambio, setCambio] = useState('')\r\n-    const [quilometragem, setQuilometragem] = useState('')\r\n-    const [qtd_portas, setQtdPortas] = useState('')\r\n-\r\n-\r\n-    // Busca dados das lojas\r\n-    const { data: dadosLoja } = useGetData(`/lojas`)\r\n-    // Envia os dados do veículo\r\n-    const { loading, createData } = usePostData('/veiculos')\r\n-    const { createEstoqueExtra } = usePostData('/pulmao');\r\n-\r\n-    // Ordena as lojas por descrição\r\n-    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n-\r\n-\r\n-\r\n-    // Função para converter campos em CAIXA ALTA\r\n-    const toUpperFields = (obj, fields = []) => {\r\n-        const copy = { ...obj }\r\n-        fields.forEach((f) => {\r\n-            if (copy[f] !== undefined && copy[f] !== null) {\r\n-                copy[f] = String(copy[f]).toUpperCase()\r\n-            }\r\n-        })\r\n-        return copy\r\n-    }\r\n-\r\n-    // Função para lidar com o envio do formulário\r\n-    const handleSubmit = async (e) => {\r\n-        e.preventDefault()\r\n-\r\n-        const data_registro = formatTimestamp(new Date())\r\n-\r\n-        // Envia nome da loja no campo 'unidade'\r\n-        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n-\r\n-        console.log('Dados a serem enviados: ', dados)\r\n-        // Padroniza para caixa alta\r\n-        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n-        console.log('Dados a serem enviados:', dados);\r\n-\r\n-        // Validação de confirmação\r\n-        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n-        if (!confirmar) return;\r\n-\r\n-        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n-            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n-            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n-        } else {\r\n-            try {\r\n-                // Verifica se a placa já existe antes de enviar os dados\r\n-                const url = selectEstoque === 'pulmao'\r\n-                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n-                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n-\r\n-                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n-\r\n-                if (existente) {\r\n-                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n-                    return;\r\n-\r\n-                } else if (selectEstoque === 'pulmao') {\r\n-                    // Busca a quantidade de veículos na unidade selecionada\r\n-                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n-                    const data = await responseUnidade.json();\r\n-                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n-                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n-\r\n-                    // Busca a quantidade total de vagas da loja\r\n-                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n-                    const dataLoja = await responseLoja.json();\r\n-                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n-                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n-                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n-\r\n-                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n-                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n-                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n-\r\n-                    // Só permite o cadastro se houver vagas disponíveis\r\n-                    if (vagasDisponiveis > 0) {\r\n-                        const dadosUpper = toUpperCaseData(dados);\r\n-                        await createEstoqueExtra(dadosUpper);\r\n-\r\n-                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n-                        //window.location.reload();\r\n-                    } else {\r\n-                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n-                    }\r\n-\r\n-                } else {\r\n-                    // Busca a quantidade de veículos na unidade selecionada\r\n-                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n-                    const data = await responseUnidade.json();\r\n-                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n-                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n-\r\n-                    // Busca a quantidade total de vagas da loja\r\n-                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n-                    const dataLoja = await responseLoja.json();\r\n-                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n-                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n-                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n-\r\n-                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n-                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n-                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n-\r\n-                    // Só permite o cadastro se houver vagas disponíveis\r\n-                    if (vagasDisponiveis > 0) {\r\n-                        const dadosUpper = toUpperCaseData(dados);\r\n-                        await createData(dadosUpper);\r\n-\r\n-                        window.alert('Veículo cadastrado com sucesso');\r\n-                        //window.location.reload();\r\n-                    } else {\r\n-                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n-                    }\r\n-                }\r\n-\r\n-            } catch (err) {\r\n-                console.error('Falha ao registrar o veículo: ', err);\r\n-                window.alert('Erro ao tentar registrar o veículo');\r\n-            }\r\n-        }\r\n-    }\r\n-\r\n-    // Função para lidar com a mudança de unidade\r\n-\r\n-    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n-    const handleUnidadeChange = (e) => {\r\n-        const selectedOption = e.target.selectedOptions[0]\r\n-        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n-        const descricao = selectedOption.getAttribute('data-descricao')\r\n-\r\n-        setUnidade(descricao)\r\n-        setCnpjUnidade(cnpj)\r\n-        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n-    }\r\n-\r\n-    return (\r\n-        <ContainerSecundario>\r\n-            <div className='container d-flex flex-column ' id=\"path\" >\r\n-                <div className=\"d-flex align-items-start \">\r\n-                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n-                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n-                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n-                </div>\r\n-            </div>\r\n-            <div className=\"container d-flex justify-content-center card-container\">\r\n-                <Box>\r\n-                    <div className='panel-heading'>\r\n-                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n-                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n-                    </div>\r\n-                    <Form onSubmit={handleSubmit}>\r\n-                        <div className='col-12 col-md-3' id='select-all'>\r\n-                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n-                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n-                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n-                                {lojasOrdenadas.map((loja) => (\r\n-                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n-                                        {loja.descricao}\r\n-                                    </option>\r\n-                                ))}\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className='col-12 col-md-4' id='select-all'>\r\n-                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n-                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n-                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n-                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n-                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n-                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n-                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n-                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\">\r\n-                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n-                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n-                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n-                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n-                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n-                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n-                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n-                                <option value=\"manual\">MANUAL</option>\r\n-                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\">\r\n-                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n-                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n-                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n-                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n-                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"d-flex flex-row-reverse\">\r\n-                            <Button type=\"submit\" variant='primary'>\r\n-                            {loading && (\r\n-                                <div className=\"spinner-border\" role=\"status\" > </div>\r\n-                            )}\r\n-                            ENVIAR</Button>\r\n-                        </div>\r\n-                    </Form>\r\n-                </Box>\r\n-            </div>\r\n-        </ContainerSecundario>\r\n-\r\n-    )\r\n-}\r\n-\r\n-export default CadastroVeiculo\r\n-import \"../../../assets/css/thead.css\";\r\n-import \"../../../assets/css/themify-icons.css\"\r\n-import Form from '../../../components/form/Form';\r\n-import Box from \"../../../components/box/Box\"\r\n-import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n-import Input from '../../../components/input/Input';\r\n-import Button from '../../../components/button/Button';\r\n-\r\n-import { useState } from 'react';\r\n-import { useGetData } from '../../../services/useGetData';\r\n-import { usePostData } from '../../../services/usePostData';\r\n-import { formatTimestamp } from '../../../hooks/formatDate';\r\n-import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n-import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n-\r\n-\r\n-\r\n-const CadastroVeiculo = () => {\r\n-\r\n-    const [marca, setMarca] = useState('')\r\n-    const [modelo, setModelo] = useState('')\r\n-    const [cor, setCor] = useState('')\r\n-    const [placa, setPlaca] = useState('')\r\n-    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n-    const [ano_modelo, setAnoModelo] = useState('')\r\n-    const [renavan, setRenavan] = useState('')\r\n-    const [unidade, setUnidade] = useState('')\r\n-    const [combustivel, setCombustivel] = useState([]);\r\n-    const [selectEstoque, setSelectEstoque] = useState('')\r\n-    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n-    const [cambio, setCambio] = useState('')\r\n-    const [quilometragem, setQuilometragem] = useState('')\r\n-    const [qtd_portas, setQtdPortas] = useState('')\r\n-\r\n-\r\n-    // Busca dados das lojas\r\n-    const { data: dadosLoja } = useGetData(`/lojas`)\r\n-    // Envia os dados do veículo\r\n-    const { loading, createData } = usePostData('/veiculos')\r\n-    const { createEstoqueExtra } = usePostData('/pulmao');\r\n-\r\n-    // Ordena as lojas por descrição\r\n-    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n-\r\n-\r\n-\r\n-    // Função para converter campos em CAIXA ALTA\r\n-    const toUpperFields = (obj, fields = []) => {\r\n-        const copy = { ...obj }\r\n-        fields.forEach((f) => {\r\n-            if (copy[f] !== undefined && copy[f] !== null) {\r\n-                copy[f] = String(copy[f]).toUpperCase()\r\n-            }\r\n-        })\r\n-        return copy\r\n-    }\r\n-\r\n-    // Função para lidar com o envio do formulário\r\n-    const handleSubmit = async (e) => {\r\n-        e.preventDefault()\r\n-\r\n-        const data_registro = formatTimestamp(new Date())\r\n-\r\n-        // Envia nome da loja no campo 'unidade'\r\n-        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n-\r\n-        console.log('Dados a serem enviados: ', dados)\r\n-        // Padroniza para caixa alta\r\n-        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n-        console.log('Dados a serem enviados:', dados);\r\n-\r\n-        // Validação de confirmação\r\n-        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n-        if (!confirmar) return;\r\n-\r\n-        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n-            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n-            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n-        } else {\r\n-            try {\r\n-                // Verifica se a placa já existe antes de enviar os dados\r\n-                const url = selectEstoque === 'pulmao'\r\n-                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n-                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n-\r\n-                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n-\r\n-                if (existente) {\r\n-                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n-                    return;\r\n-\r\n-                } else if (selectEstoque === 'pulmao') {\r\n-                    // Busca a quantidade de veículos na unidade selecionada\r\n-                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n-                    const data = await responseUnidade.json();\r\n-                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n-                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n-\r\n-                    // Busca a quantidade total de vagas da loja\r\n-                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n-                    const dataLoja = await responseLoja.json();\r\n-                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n-                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n-                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n-\r\n-                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n-                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n-                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n-\r\n-                    // Só permite o cadastro se houver vagas disponíveis\r\n-                    if (vagasDisponiveis > 0) {\r\n-                        const dadosUpper = toUpperCaseData(dados);\r\n-                        await createEstoqueExtra(dadosUpper);\r\n-\r\n-                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n-                        //window.location.reload();\r\n-                    } else {\r\n-                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n-                    }\r\n-\r\n-                } else {\r\n-                    // Busca a quantidade de veículos na unidade selecionada\r\n-                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n-                    const data = await responseUnidade.json();\r\n-                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n-                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n-\r\n-                    // Busca a quantidade total de vagas da loja\r\n-                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n-                    const dataLoja = await responseLoja.json();\r\n-                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n-                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n-                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n-\r\n-                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n-                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n-                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n-\r\n-                    // Só permite o cadastro se houver vagas disponíveis\r\n-                    if (vagasDisponiveis > 0) {\r\n-                        const dadosUpper = toUpperCaseData(dados);\r\n-                        await createData(dadosUpper);\r\n-\r\n-                        window.alert('Veículo cadastrado com sucesso');\r\n-                        //window.location.reload();\r\n-                    } else {\r\n-                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n-                    }\r\n-                }\r\n-\r\n-            } catch (err) {\r\n-                console.error('Falha ao registrar o veículo: ', err);\r\n-                window.alert('Erro ao tentar registrar o veículo');\r\n-            }\r\n-        }\r\n-    }\r\n-\r\n-    // Função para lidar com a mudança de unidade\r\n-\r\n-    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n-    const handleUnidadeChange = (e) => {\r\n-        const selectedOption = e.target.selectedOptions[0]\r\n-        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n-        const descricao = selectedOption.getAttribute('data-descricao')\r\n-\r\n-        setUnidade(descricao)\r\n-        setCnpjUnidade(cnpj)\r\n-        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n-    }\r\n-\r\n-    return (\r\n-        <ContainerSecundario>\r\n-            <div className='container d-flex flex-column ' id=\"path\" >\r\n-                <div className=\"d-flex align-items-start \">\r\n-                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n-                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n-                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n-                </div>\r\n-            </div>\r\n-            <div className=\"container d-flex justify-content-center card-container\">\r\n-                <Box>\r\n-                    <div className='panel-heading'>\r\n-                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n-                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n-                    </div>\r\n-                    <Form onSubmit={handleSubmit}>\r\n-                        <div className='col-12 col-md-3' id='select-all'>\r\n-                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n-                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n-                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n-                                {lojasOrdenadas.map((loja) => (\r\n-                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n-                                        {loja.descricao}\r\n-                                    </option>\r\n-                                ))}\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className='col-12 col-md-4' id='select-all'>\r\n-                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n-                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n-                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n-                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n-                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n-                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n-                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n-                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\">\r\n-                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n-                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n-                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n-                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n-                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n-                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n-                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n-                                <option value=\"manual\">MANUAL</option>\r\n-                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\">\r\n-                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n-                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n-                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n-                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n-                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"d-flex flex-row-reverse\">\r\n-                            \r\n-                            {loading && (\r\n-                                <div className=\"spinner-border\" role=\"status\" > </div>\r\n-                            )}\r\n-                            <Button type=\"submit\" variant='primary'>ENVIAR</Button>\r\n-                        </div>\r\n-                    </Form>\r\n-                </Box>\r\n-            </div>\r\n-        </ContainerSecundario>\r\n-\r\n-    )\r\n-}\r\n-\r\n-export default CadastroVeiculo\r\n-import \"../../../assets/css/thead.css\";\r\n-import \"../../../assets/css/themify-icons.css\"\r\n-import Form from '../../../components/form/Form';\r\n-import Box from \"../../../components/box/Box\"\r\n-import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n-import Input from '../../../components/input/Input';\r\n-import Button from '../../../components/button/Button';\r\n-\r\n-import { useState } from 'react';\r\n-import { useGetData } from '../../../services/useGetData';\r\n-import { usePostData } from '../../../services/usePostData';\r\n-import { formatTimestamp } from '../../../hooks/formatDate';\r\n-import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n-import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n-\r\n-\r\n-\r\n-const CadastroVeiculo = () => {\r\n-\r\n-    const [marca, setMarca] = useState('')\r\n-    const [modelo, setModelo] = useState('')\r\n-    const [cor, setCor] = useState('')\r\n-    const [placa, setPlaca] = useState('')\r\n-    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n-    const [ano_modelo, setAnoModelo] = useState('')\r\n-    const [renavan, setRenavan] = useState('')\r\n-    const [unidade, setUnidade] = useState('')\r\n-    const [combustivel, setCombustivel] = useState([]);\r\n-    const [selectEstoque, setSelectEstoque] = useState('')\r\n-    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n-    const [cambio, setCambio] = useState('')\r\n-    const [quilometragem, setQuilometragem] = useState('')\r\n-    const [qtd_portas, setQtdPortas] = useState('')\r\n-\r\n-\r\n-    // Busca dados das lojas\r\n-    const { data: dadosLoja } = useGetData(`/lojas`)\r\n-    // Envia os dados do veículo\r\n-    const { loading, createData } = usePostData('/veiculos')\r\n-    const { createEstoqueExtra } = usePostData('/pulmao');\r\n-\r\n-    // Ordena as lojas por descrição\r\n-    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n-\r\n-\r\n-\r\n-    // Função para converter campos em CAIXA ALTA\r\n-    const toUpperFields = (obj, fields = []) => {\r\n-        const copy = { ...obj }\r\n-        fields.forEach((f) => {\r\n-            if (copy[f] !== undefined && copy[f] !== null) {\r\n-                copy[f] = String(copy[f]).toUpperCase()\r\n-            }\r\n-        })\r\n-        return copy\r\n-    }\r\n-\r\n-    // Função para lidar com o envio do formulário\r\n-    const handleSubmit = async (e) => {\r\n-        e.preventDefault()\r\n-\r\n-        const data_registro = formatTimestamp(new Date())\r\n-\r\n-        // Envia nome da loja no campo 'unidade'\r\n-        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n-\r\n-        console.log('Dados a serem enviados: ', dados)\r\n-        // Padroniza para caixa alta\r\n-        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n-        console.log('Dados a serem enviados:', dados);\r\n-\r\n-        // Validação de confirmação\r\n-        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n-        if (!confirmar) return;\r\n-\r\n-        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n-            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n-            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n-        } else {\r\n-            try {\r\n-                // Verifica se a placa já existe antes de enviar os dados\r\n-                const url = selectEstoque === 'pulmao'\r\n-                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n-                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n-\r\n-                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n-\r\n-                if (existente) {\r\n-                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n-                    return;\r\n-\r\n-                } else if (selectEstoque === 'pulmao') {\r\n-                    // Busca a quantidade de veículos na unidade selecionada\r\n-                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n-                    const data = await responseUnidade.json();\r\n-                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n-                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n-\r\n-                    // Busca a quantidade total de vagas da loja\r\n-                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n-                    const dataLoja = await responseLoja.json();\r\n-                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n-                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n-                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n-\r\n-                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n-                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n-                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n-\r\n-                    // Só permite o cadastro se houver vagas disponíveis\r\n-                    if (vagasDisponiveis > 0) {\r\n-                        const dadosUpper = toUpperCaseData(dados);\r\n-                        await createEstoqueExtra(dadosUpper);\r\n-\r\n-                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n-                        //window.location.reload();\r\n-                    } else {\r\n-                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n-                    }\r\n-\r\n-                } else {\r\n-                    // Busca a quantidade de veículos na unidade selecionada\r\n-                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n-                    const data = await responseUnidade.json();\r\n-                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n-                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n-\r\n-                    // Busca a quantidade total de vagas da loja\r\n-                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n-                    const dataLoja = await responseLoja.json();\r\n-                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n-                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n-                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n-\r\n-                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n-                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n-                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n-\r\n-                    // Só permite o cadastro se houver vagas disponíveis\r\n-                    if (vagasDisponiveis > 0) {\r\n-                        const dadosUpper = toUpperCaseData(dados);\r\n-                        await createData(dadosUpper);\r\n-\r\n-                        window.alert('Veículo cadastrado com sucesso');\r\n-                        //window.location.reload();\r\n-                    } else {\r\n-                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n-                    }\r\n-                }\r\n-\r\n-            } catch (err) {\r\n-                console.error('Falha ao registrar o veículo: ', err);\r\n-                window.alert('Erro ao tentar registrar o veículo');\r\n-            }\r\n-        }\r\n-    }\r\n-\r\n-    // Função para lidar com a mudança de unidade\r\n-\r\n-    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n-    const handleUnidadeChange = (e) => {\r\n-        const selectedOption = e.target.selectedOptions[0]\r\n-        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n-        const descricao = selectedOption.getAttribute('data-descricao')\r\n-\r\n-        setUnidade(descricao)\r\n-        setCnpjUnidade(cnpj)\r\n-        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n-    }\r\n-\r\n-    return (\r\n-        <ContainerSecundario>\r\n-            <div className='container d-flex flex-column ' id=\"path\" >\r\n-                <div className=\"d-flex align-items-start \">\r\n-                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n-                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n-                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n-                </div>\r\n-            </div>\r\n-            <div className=\"container d-flex justify-content-center card-container\">\r\n-                <Box>\r\n-                    <div className='panel-heading'>\r\n-                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n-                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n-                    </div>\r\n-                    <Form onSubmit={handleSubmit}>\r\n-                        <div className='col-12 col-md-3' id='select-all'>\r\n-                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n-                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n-                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n-                                {lojasOrdenadas.map((loja) => (\r\n-                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n-                                        {loja.descricao}\r\n-                                    </option>\r\n-                                ))}\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className='col-12 col-md-4' id='select-all'>\r\n-                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n-                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n-                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n-                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n-                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n-                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n-                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n-                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\">\r\n-                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n-                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n-                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n-                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n-                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n-                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n-                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n-                                <option value=\"manual\">MANUAL</option>\r\n-                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\">\r\n-                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n-                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n-                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n-                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n-                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"d-flex flex-row-reverse\">\r\n-                            {loading && (\r\n-                                <div className=\"spinner-border\" role=\"status\" ></div>\r\n-                        \r\n-                            <Button type=\"submit\" variant='primary'>ENVIAR</Button>\r\n-                                )}\r\n-                        </div>\r\n-                    </Form>\r\n-                </Box>\r\n-            </div>\r\n-        </ContainerSecundario>\r\n-\r\n-    )\r\n-}\r\n-\r\n-export default CadastroVeiculo\r\n-import \"../../../assets/css/thead.css\";\r\n-import \"../../../assets/css/themify-icons.css\"\r\n-import Form from '../../../components/form/Form';\r\n-import Box from \"../../../components/box/Box\"\r\n-import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n-import Input from '../../../components/input/Input';\r\n-import Button from '../../../components/button/Button';\r\n-\r\n-import { useState } from 'react';\r\n-import { useGetData } from '../../../services/useGetData';\r\n-import { usePostData } from '../../../services/usePostData';\r\n-import { formatTimestamp } from '../../../hooks/formatDate';\r\n-import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n-import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n-\r\n-\r\n-\r\n-const CadastroVeiculo = () => {\r\n-\r\n-    const [marca, setMarca] = useState('')\r\n-    const [modelo, setModelo] = useState('')\r\n-    const [cor, setCor] = useState('')\r\n-    const [placa, setPlaca] = useState('')\r\n-    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n-    const [ano_modelo, setAnoModelo] = useState('')\r\n-    const [renavan, setRenavan] = useState('')\r\n-    const [unidade, setUnidade] = useState('')\r\n-    const [combustivel, setCombustivel] = useState([]);\r\n-    const [selectEstoque, setSelectEstoque] = useState('')\r\n-    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n-    const [cambio, setCambio] = useState('')\r\n-    const [quilometragem, setQuilometragem] = useState('')\r\n-    const [qtd_portas, setQtdPortas] = useState('')\r\n-\r\n-\r\n-    // Busca dados das lojas\r\n-    const { data: dadosLoja } = useGetData(`/lojas`)\r\n-    // Envia os dados do veículo\r\n-    const { loading, createData } = usePostData('/veiculos')\r\n-    const { createEstoqueExtra } = usePostData('/pulmao');\r\n-\r\n-    // Ordena as lojas por descrição\r\n-    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n-\r\n-\r\n-\r\n-    // Função para converter campos em CAIXA ALTA\r\n-    const toUpperFields = (obj, fields = []) => {\r\n-        const copy = { ...obj }\r\n-        fields.forEach((f) => {\r\n-            if (copy[f] !== undefined && copy[f] !== null) {\r\n-                copy[f] = String(copy[f]).toUpperCase()\r\n-            }\r\n-        })\r\n-        return copy\r\n-    }\r\n-\r\n-    // Função para lidar com o envio do formulário\r\n-    const handleSubmit = async (e) => {\r\n-        e.preventDefault()\r\n-\r\n-        const data_registro = formatTimestamp(new Date())\r\n-\r\n-        // Envia nome da loja no campo 'unidade'\r\n-        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n-\r\n-        console.log('Dados a serem enviados: ', dados)\r\n-        // Padroniza para caixa alta\r\n-        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n-        console.log('Dados a serem enviados:', dados);\r\n-\r\n-        // Validação de confirmação\r\n-        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n-        if (!confirmar) return;\r\n-\r\n-        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n-            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n-            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n-        } else {\r\n-            try {\r\n-                // Verifica se a placa já existe antes de enviar os dados\r\n-                const url = selectEstoque === 'pulmao'\r\n-                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n-                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n-\r\n-                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n-\r\n-                if (existente) {\r\n-                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n-                    return;\r\n-\r\n-                } else if (selectEstoque === 'pulmao') {\r\n-                    // Busca a quantidade de veículos na unidade selecionada\r\n-                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n-                    const data = await responseUnidade.json();\r\n-                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n-                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n-\r\n-                    // Busca a quantidade total de vagas da loja\r\n-                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n-                    const dataLoja = await responseLoja.json();\r\n-                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n-                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n-                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n-\r\n-                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n-                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n-                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n-\r\n-                    // Só permite o cadastro se houver vagas disponíveis\r\n-                    if (vagasDisponiveis > 0) {\r\n-                        const dadosUpper = toUpperCaseData(dados);\r\n-                        await createEstoqueExtra(dadosUpper);\r\n-\r\n-                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n-                        //window.location.reload();\r\n-                    } else {\r\n-                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n-                    }\r\n-\r\n-                } else {\r\n-                    // Busca a quantidade de veículos na unidade selecionada\r\n-                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n-                    const data = await responseUnidade.json();\r\n-                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n-                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n-\r\n-                    // Busca a quantidade total de vagas da loja\r\n-                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n-                    const dataLoja = await responseLoja.json();\r\n-                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n-                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n-                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n-\r\n-                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n-                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n-                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n-\r\n-                    // Só permite o cadastro se houver vagas disponíveis\r\n-                    if (vagasDisponiveis > 0) {\r\n-                        const dadosUpper = toUpperCaseData(dados);\r\n-                        await createData(dadosUpper);\r\n-\r\n-                        window.alert('Veículo cadastrado com sucesso');\r\n-                        //window.location.reload();\r\n-                    } else {\r\n-                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n-                    }\r\n-                }\r\n-\r\n-            } catch (err) {\r\n-                console.error('Falha ao registrar o veículo: ', err);\r\n-                window.alert('Erro ao tentar registrar o veículo');\r\n-            }\r\n-        }\r\n-    }\r\n-\r\n-    // Função para lidar com a mudança de unidade\r\n-\r\n-    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n-    const handleUnidadeChange = (e) => {\r\n-        const selectedOption = e.target.selectedOptions[0]\r\n-        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n-        const descricao = selectedOption.getAttribute('data-descricao')\r\n-\r\n-        setUnidade(descricao)\r\n-        setCnpjUnidade(cnpj)\r\n-        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n-    }\r\n-\r\n-    return (\r\n-        <ContainerSecundario>\r\n-            <div className='container d-flex flex-column ' id=\"path\" >\r\n-                <div className=\"d-flex align-items-start \">\r\n-                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n-                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n-                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n-                </div>\r\n-            </div>\r\n-            <div className=\"container d-flex justify-content-center card-container\">\r\n-                <Box>\r\n-                    <div className='panel-heading'>\r\n-                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n-                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n-                    </div>\r\n-                    <Form onSubmit={handleSubmit}>\r\n-                        <div className='col-12 col-md-3' id='select-all'>\r\n-                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n-                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n-                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n-                                {lojasOrdenadas.map((loja) => (\r\n-                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n-                                        {loja.descricao}\r\n-                                    </option>\r\n-                                ))}\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className='col-12 col-md-4' id='select-all'>\r\n-                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n-                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n-                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n-                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n-                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n-                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n-                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n-                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\">\r\n-                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n-                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n-                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n-                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n-                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n-                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n-                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n-                                <option value=\"manual\">MANUAL</option>\r\n-                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\">\r\n-                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n-                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n-                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n-                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n-                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"d-flex flex-row-reverse\">\r\n-                            {loading && (\r\n-                                <div className=\"spinner-border\" role=\"status\" ></div>\r\n-                            )}\r\n-                            <Button type=\"submit\" variant='primary'>ENVIAR</Button>\r\n-                            \r\n-                        </div>\r\n-                    </Form>\r\n-                </Box>\r\n-            </div>\r\n-        </ContainerSecundario>\r\n-\r\n-    )\r\n-}\r\n-\r\n-export default CadastroVeiculo\r\n-import \"../../../assets/css/thead.css\";\r\n-import \"../../../assets/css/themify-icons.css\"\r\n-import Form from '../../../components/form/Form';\r\n-import Box from \"../../../components/box/Box\"\r\n-import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n-import Input from '../../../components/input/Input';\r\n-import Button from '../../../components/button/Button';\r\n-\r\n-import { useState } from 'react';\r\n-import { useGetData } from '../../../services/useGetData';\r\n-import { usePostData } from '../../../services/usePostData';\r\n-import { formatTimestamp } from '../../../hooks/formatDate';\r\n-import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n-import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n-\r\n-\r\n-\r\n-const CadastroVeiculo = () => {\r\n-\r\n-    const [marca, setMarca] = useState('')\r\n-    const [modelo, setModelo] = useState('')\r\n-    const [cor, setCor] = useState('')\r\n-    const [placa, setPlaca] = useState('')\r\n-    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n-    const [ano_modelo, setAnoModelo] = useState('')\r\n-    const [renavan, setRenavan] = useState('')\r\n-    const [unidade, setUnidade] = useState('')\r\n-    const [combustivel, setCombustivel] = useState([]);\r\n-    const [selectEstoque, setSelectEstoque] = useState('')\r\n-    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n-    const [cambio, setCambio] = useState('')\r\n-    const [quilometragem, setQuilometragem] = useState('')\r\n-    const [qtd_portas, setQtdPortas] = useState('')\r\n-\r\n-\r\n-    // Busca dados das lojas\r\n-    const { data: dadosLoja } = useGetData(`/lojas`)\r\n-    // Envia os dados do veículo\r\n-    const { loading, createData } = usePostData('/veiculos')\r\n-    const { createEstoqueExtra } = usePostData('/pulmao');\r\n-\r\n-    // Ordena as lojas por descrição\r\n-    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n-\r\n-\r\n-\r\n-    // Função para converter campos em CAIXA ALTA\r\n-    const toUpperFields = (obj, fields = []) => {\r\n-        const copy = { ...obj }\r\n-        fields.forEach((f) => {\r\n-            if (copy[f] !== undefined && copy[f] !== null) {\r\n-                copy[f] = String(copy[f]).toUpperCase()\r\n-            }\r\n-        })\r\n-        return copy\r\n-    }\r\n-\r\n-    // Função para lidar com o envio do formulário\r\n-    const handleSubmit = async (e) => {\r\n-        e.preventDefault()\r\n-\r\n-        const data_registro = formatTimestamp(new Date())\r\n-\r\n-        // Envia nome da loja no campo 'unidade'\r\n-        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n-\r\n-        console.log('Dados a serem enviados: ', dados)\r\n-        // Padroniza para caixa alta\r\n-        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n-        console.log('Dados a serem enviados:', dados);\r\n-\r\n-        // Validação de confirmação\r\n-        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n-        if (!confirmar) return;\r\n-\r\n-        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n-            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n-            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n-        } else {\r\n-            try {\r\n-                // Verifica se a placa já existe antes de enviar os dados\r\n-                const url = selectEstoque === 'pulmao'\r\n-                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n-                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n-\r\n-                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n-\r\n-                if (existente) {\r\n-                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n-                    return;\r\n-\r\n-                } else if (selectEstoque === 'pulmao') {\r\n-                    // Busca a quantidade de veículos na unidade selecionada\r\n-                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n-                    const data = await responseUnidade.json();\r\n-                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n-                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n-\r\n-                    // Busca a quantidade total de vagas da loja\r\n-                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n-                    const dataLoja = await responseLoja.json();\r\n-                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n-                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n-                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n-\r\n-                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n-                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n-                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n-\r\n-                    // Só permite o cadastro se houver vagas disponíveis\r\n-                    if (vagasDisponiveis > 0) {\r\n-                        const dadosUpper = toUpperCaseData(dados);\r\n-                        await createEstoqueExtra(dadosUpper);\r\n-\r\n-                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n-                        //window.location.reload();\r\n-                    } else {\r\n-                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n-                    }\r\n-\r\n-                } else {\r\n-                    // Busca a quantidade de veículos na unidade selecionada\r\n-                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n-                    const data = await responseUnidade.json();\r\n-                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n-                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n-\r\n-                    // Busca a quantidade total de vagas da loja\r\n-                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n-                    const dataLoja = await responseLoja.json();\r\n-                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n-                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n-                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n-\r\n-                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n-                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n-                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n-\r\n-                    // Só permite o cadastro se houver vagas disponíveis\r\n-                    if (vagasDisponiveis > 0) {\r\n-                        const dadosUpper = toUpperCaseData(dados);\r\n-                        await createData(dadosUpper);\r\n-\r\n-                        window.alert('Veículo cadastrado com sucesso');\r\n-                        //window.location.reload();\r\n-                    } else {\r\n-                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n-                    }\r\n-                }\r\n-\r\n-            } catch (err) {\r\n-                console.error('Falha ao registrar o veículo: ', err);\r\n-                window.alert('Erro ao tentar registrar o veículo');\r\n-            }\r\n-        }\r\n-    }\r\n-\r\n-    // Função para lidar com a mudança de unidade\r\n-\r\n-    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n-    const handleUnidadeChange = (e) => {\r\n-        const selectedOption = e.target.selectedOptions[0]\r\n-        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n-        const descricao = selectedOption.getAttribute('data-descricao')\r\n-\r\n-        setUnidade(descricao)\r\n-        setCnpjUnidade(cnpj)\r\n-        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n-    }\r\n-\r\n-    return (\r\n-        <ContainerSecundario>\r\n-            <div className='container d-flex flex-column ' id=\"path\" >\r\n-                <div className=\"d-flex align-items-start \">\r\n-                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n-                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n-                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n-                </div>\r\n-            </div>\r\n-            <div className=\"container d-flex justify-content-center card-container\">\r\n-                <Box>\r\n-                    <div className='panel-heading'>\r\n-                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n-                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n-                    </div>\r\n-                    <Form onSubmit={handleSubmit}>\r\n-                        <div className='col-12 col-md-3' id='select-all'>\r\n-                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n-                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n-                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n-                                {lojasOrdenadas.map((loja) => (\r\n-                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n-                                        {loja.descricao}\r\n-                                    </option>\r\n-                                ))}\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className='col-12 col-md-4' id='select-all'>\r\n-                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n-                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n-                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n-                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n-                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n-                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n-                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n-                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\">\r\n-                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n-                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n-                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n-                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n-                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n-                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n-                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n-                                <option value=\"manual\">MANUAL</option>\r\n-                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\">\r\n-                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n-                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n-                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n-                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n-                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"d-flex flex-row-reverse\">\r\n-                            {loading && (\r\n-                                <div className=\"spinner-border\" role=\"status\" > <Button type=\"submit\" variant='primary'>ENVIAR</Button></div>\r\n-                            )}\r\n-                            \r\n-                        </div>\r\n-                    </Form>\r\n-                </Box>\r\n-            </div>\r\n-        </ContainerSecundario>\r\n-\r\n-    )\r\n-}\r\n-\r\n-export default CadastroVeiculo\r\n-import \"../../../assets/css/thead.css\";\r\n-import \"../../../assets/css/themify-icons.css\"\r\n-import Form from '../../../components/form/Form';\r\n-import Box from \"../../../components/box/Box\"\r\n-import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n-import Input from '../../../components/input/Input';\r\n-import Button from '../../../components/button/Button';\r\n-\r\n-import { useState } from 'react';\r\n-import { useGetData } from '../../../services/useGetData';\r\n-import { usePostData } from '../../../services/usePostData';\r\n-import { formatTimestamp } from '../../../hooks/formatDate';\r\n-import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n-import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n-\r\n-\r\n-\r\n-const CadastroVeiculo = () => {\r\n-\r\n-    const [marca, setMarca] = useState('')\r\n-    const [modelo, setModelo] = useState('')\r\n-    const [cor, setCor] = useState('')\r\n-    const [placa, setPlaca] = useState('')\r\n-    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n-    const [ano_modelo, setAnoModelo] = useState('')\r\n-    const [renavan, setRenavan] = useState('')\r\n-    const [unidade, setUnidade] = useState('')\r\n-    const [combustivel, setCombustivel] = useState([]);\r\n-    const [selectEstoque, setSelectEstoque] = useState('')\r\n-    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n-    const [cambio, setCambio] = useState('')\r\n-    const [quilometragem, setQuilometragem] = useState('')\r\n-    const [qtd_portas, setQtdPortas] = useState('')\r\n-\r\n-\r\n-    // Busca dados das lojas\r\n-    const { data: dadosLoja } = useGetData(`/lojas`)\r\n-    // Envia os dados do veículo\r\n-    const { loading, createData } = usePostData('/veiculos')\r\n-    const { createEstoqueExtra } = usePostData('/pulmao');\r\n-\r\n-    // Ordena as lojas por descrição\r\n-    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n-\r\n-\r\n-\r\n-    // Função para converter campos em CAIXA ALTA\r\n-    const toUpperFields = (obj, fields = []) => {\r\n-        const copy = { ...obj }\r\n-        fields.forEach((f) => {\r\n-            if (copy[f] !== undefined && copy[f] !== null) {\r\n-                copy[f] = String(copy[f]).toUpperCase()\r\n-            }\r\n-        })\r\n-        return copy\r\n-    }\r\n-\r\n-    // Função para lidar com o envio do formulário\r\n-    const handleSubmit = async (e) => {\r\n-        e.preventDefault()\r\n-\r\n-        const data_registro = formatTimestamp(new Date())\r\n-\r\n-        // Envia nome da loja no campo 'unidade'\r\n-        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n-\r\n-        console.log('Dados a serem enviados: ', dados)\r\n-        // Padroniza para caixa alta\r\n-        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n-        console.log('Dados a serem enviados:', dados);\r\n-\r\n-        // Validação de confirmação\r\n-        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n-        if (!confirmar) return;\r\n-\r\n-        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n-            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n-            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n-        } else {\r\n-            try {\r\n-                // Verifica se a placa já existe antes de enviar os dados\r\n-                const url = selectEstoque === 'pulmao'\r\n-                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n-                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n-\r\n-                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n-\r\n-                if (existente) {\r\n-                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n-                    return;\r\n-\r\n-                } else if (selectEstoque === 'pulmao') {\r\n-                    // Busca a quantidade de veículos na unidade selecionada\r\n-                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n-                    const data = await responseUnidade.json();\r\n-                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n-                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n-\r\n-                    // Busca a quantidade total de vagas da loja\r\n-                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n-                    const dataLoja = await responseLoja.json();\r\n-                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n-                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n-                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n-\r\n-                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n-                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n-                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n-\r\n-                    // Só permite o cadastro se houver vagas disponíveis\r\n-                    if (vagasDisponiveis > 0) {\r\n-                        const dadosUpper = toUpperCaseData(dados);\r\n-                        await createEstoqueExtra(dadosUpper);\r\n-\r\n-                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n-                        //window.location.reload();\r\n-                    } else {\r\n-                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n-                    }\r\n-\r\n-                } else {\r\n-                    // Busca a quantidade de veículos na unidade selecionada\r\n-                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n-                    const data = await responseUnidade.json();\r\n-                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n-                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n-\r\n-                    // Busca a quantidade total de vagas da loja\r\n-                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n-                    const dataLoja = await responseLoja.json();\r\n-                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n-                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n-                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n-\r\n-                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n-                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n-                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n-\r\n-                    // Só permite o cadastro se houver vagas disponíveis\r\n-                    if (vagasDisponiveis > 0) {\r\n-                        const dadosUpper = toUpperCaseData(dados);\r\n-                        await createData(dadosUpper);\r\n-\r\n-                        window.alert('Veículo cadastrado com sucesso');\r\n-                        //window.location.reload();\r\n-                    } else {\r\n-                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n-                    }\r\n-                }\r\n-\r\n-            } catch (err) {\r\n-                console.error('Falha ao registrar o veículo: ', err);\r\n-                window.alert('Erro ao tentar registrar o veículo');\r\n-            }\r\n-        }\r\n-    }\r\n-\r\n-    // Função para lidar com a mudança de unidade\r\n-\r\n-    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n-    const handleUnidadeChange = (e) => {\r\n-        const selectedOption = e.target.selectedOptions[0]\r\n-        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n-        const descricao = selectedOption.getAttribute('data-descricao')\r\n-\r\n-        setUnidade(descricao)\r\n-        setCnpjUnidade(cnpj)\r\n-        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n-    }\r\n-\r\n-    return (\r\n-        <ContainerSecundario>\r\n-            <div className='container d-flex flex-column ' id=\"path\" >\r\n-                <div className=\"d-flex align-items-start \">\r\n-                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n-                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n-                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n-                </div>\r\n-            </div>\r\n-            <div className=\"container d-flex justify-content-center card-container\">\r\n-                <Box>\r\n-                    <div className='panel-heading'>\r\n-                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n-                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n-                    </div>\r\n-                    <Form onSubmit={handleSubmit}>\r\n-                        <div className='col-12 col-md-3' id='select-all'>\r\n-                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n-                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n-                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n-                                {lojasOrdenadas.map((loja) => (\r\n-                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n-                                        {loja.descricao}\r\n-                                    </option>\r\n-                                ))}\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className='col-12 col-md-4' id='select-all'>\r\n-                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n-                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n-                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n-                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n-                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n-                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n-                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n-                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\">\r\n-                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n-                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n-                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n-                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n-                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n-                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n-                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n-                                <option value=\"manual\">MANUAL</option>\r\n-                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\">\r\n-                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n-                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n-                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n-                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n-                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"d-flex flex-row-reverse\">\r\n-                            {loading && (\r\n-                                <div className=\"spinner-border\" role=\"status\" > </div>\r\n-                            )}\r\n-                            <Button type=\"submit\" variant='primary'>ENVIAR</Button>\r\n-                        </div>\r\n-                    </Form>\r\n-                </Box>\r\n-            </div>\r\n-        </ContainerSecundario>\r\n-\r\n-    )\r\n-}\r\n-\r\n-export default CadastroVeiculo\r\n-import \"../../../assets/css/thead.css\";\r\n-import \"../../../assets/css/themify-icons.css\"\r\n-import Form from '../../../components/form/Form';\r\n-import Box from \"../../../components/box/Box\"\r\n-import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n-import Input from '../../../components/input/Input';\r\n-import Button from '../../../components/button/Button';\r\n-\r\n-import { useState } from 'react';\r\n-import { useGetData } from '../../../services/useGetData';\r\n-import { usePostData } from '../../../services/usePostData';\r\n-import { formatTimestamp } from '../../../hooks/formatDate';\r\n-import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n-import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n-\r\n-\r\n-\r\n-const CadastroVeiculo = () => {\r\n-\r\n-    const [marca, setMarca] = useState('')\r\n-    const [modelo, setModelo] = useState('')\r\n-    const [cor, setCor] = useState('')\r\n-    const [placa, setPlaca] = useState('')\r\n-    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n-    const [ano_modelo, setAnoModelo] = useState('')\r\n-    const [renavan, setRenavan] = useState('')\r\n-    const [unidade, setUnidade] = useState('')\r\n-    const [combustivel, setCombustivel] = useState([]);\r\n-    const [selectEstoque, setSelectEstoque] = useState('')\r\n-    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n-    const [cambio, setCambio] = useState('')\r\n-    const [quilometragem, setQuilometragem] = useState('')\r\n-    const [qtd_portas, setQtdPortas] = useState('')\r\n-\r\n-\r\n-    // Busca dados das lojas\r\n-    const { data: dadosLoja } = useGetData(`/lojas`)\r\n-    // Envia os dados do veículo\r\n-    const { loading, createData } = usePostData('/veiculos')\r\n-    const { createEstoqueExtra } = usePostData('/pulmao');\r\n-\r\n-    // Ordena as lojas por descrição\r\n-    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n-\r\n-\r\n-\r\n-    // Função para converter campos em CAIXA ALTA\r\n-    const toUpperFields = (obj, fields = []) => {\r\n-        const copy = { ...obj }\r\n-        fields.forEach((f) => {\r\n-            if (copy[f] !== undefined && copy[f] !== null) {\r\n-                copy[f] = String(copy[f]).toUpperCase()\r\n-            }\r\n-        })\r\n-        return copy\r\n-    }\r\n-\r\n-    // Função para lidar com o envio do formulário\r\n-    const handleSubmit = async (e) => {\r\n-        e.preventDefault()\r\n-\r\n-        const data_registro = formatTimestamp(new Date())\r\n-\r\n-        // Envia nome da loja no campo 'unidade'\r\n-        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n-\r\n-        console.log('Dados a serem enviados: ', dados)\r\n-        // Padroniza para caixa alta\r\n-        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n-        console.log('Dados a serem enviados:', dados);\r\n-\r\n-        // Validação de confirmação\r\n-        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n-        if (!confirmar) return;\r\n-\r\n-        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n-            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n-            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n-        } else {\r\n-            try {\r\n-                // Verifica se a placa já existe antes de enviar os dados\r\n-                const url = selectEstoque === 'pulmao'\r\n-                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n-                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n-\r\n-                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n-\r\n-                if (existente) {\r\n-                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n-                    return;\r\n-\r\n-                } else if (selectEstoque === 'pulmao') {\r\n-                    // Busca a quantidade de veículos na unidade selecionada\r\n-                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n-                    const data = await responseUnidade.json();\r\n-                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n-                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n-\r\n-                    // Busca a quantidade total de vagas da loja\r\n-                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n-                    const dataLoja = await responseLoja.json();\r\n-                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n-                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n-                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n-\r\n-                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n-                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n-                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n-\r\n-                    // Só permite o cadastro se houver vagas disponíveis\r\n-                    if (vagasDisponiveis > 0) {\r\n-                        const dadosUpper = toUpperCaseData(dados);\r\n-                        await createEstoqueExtra(dadosUpper);\r\n-\r\n-                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n-                        //window.location.reload();\r\n-                    } else {\r\n-                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n-                    }\r\n-\r\n-                } else {\r\n-                    // Busca a quantidade de veículos na unidade selecionada\r\n-                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n-                    const data = await responseUnidade.json();\r\n-                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n-                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n-\r\n-                    // Busca a quantidade total de vagas da loja\r\n-                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n-                    const dataLoja = await responseLoja.json();\r\n-                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n-                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n-                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n-\r\n-                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n-                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n-                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n-\r\n-                    // Só permite o cadastro se houver vagas disponíveis\r\n-                    if (vagasDisponiveis > 0) {\r\n-                        const dadosUpper = toUpperCaseData(dados);\r\n-                        await createData(dadosUpper);\r\n-\r\n-                        window.alert('Veículo cadastrado com sucesso');\r\n-                        //window.location.reload();\r\n-                    } else {\r\n-                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n-                    }\r\n-                }\r\n-\r\n-            } catch (err) {\r\n-                console.error('Falha ao registrar o veículo: ', err);\r\n-                window.alert('Erro ao tentar registrar o veículo');\r\n-            }\r\n-        }\r\n-    }\r\n-\r\n-    // Função para lidar com a mudança de unidade\r\n-\r\n-    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n-    const handleUnidadeChange = (e) => {\r\n-        const selectedOption = e.target.selectedOptions[0]\r\n-        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n-        const descricao = selectedOption.getAttribute('data-descricao')\r\n-\r\n-        setUnidade(descricao)\r\n-        setCnpjUnidade(cnpj)\r\n-        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n-    }\r\n-\r\n-    return (\r\n-        <ContainerSecundario>\r\n-            <div className='container d-flex flex-column ' id=\"path\" >\r\n-                <div className=\"d-flex align-items-start \">\r\n-                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n-                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n-                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n-                </div>\r\n-            </div>\r\n-            <div className=\"container d-flex justify-content-center card-container\">\r\n-                <Box>\r\n-                    <div className='panel-heading'>\r\n-                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n-                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n-                    </div>\r\n-                    <Form onSubmit={handleSubmit}>\r\n-                        <div className='col-12 col-md-3' id='select-all'>\r\n-                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n-                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n-                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n-                                {lojasOrdenadas.map((loja) => (\r\n-                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n-                                        {loja.descricao}\r\n-                                    </option>\r\n-                                ))}\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className='col-12 col-md-4' id='select-all'>\r\n-                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n-                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n-                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n-                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n-                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n-                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n-                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n-                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\">\r\n-                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n-                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n-                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n-                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n-                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n-                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n-                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n-                                <option value=\"manual\">MANUAL</option>\r\n-                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\">\r\n-                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n-                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n-                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n-                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n-                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"d-flex flex-row-reverse\">\r\n-                            \r\n-                            <Button type=\"submit\" variant='primary'>ENVIAR</Button>\r\n-                        </div>\r\n-                    </Form>\r\n-                </Box>\r\n-            </div>\r\n-        </ContainerSecundario>\r\n-\r\n-    )\r\n-}\r\n-\r\n-export default CadastroVeiculo\r\n-import \"../../../assets/css/thead.css\";\r\n-import \"../../../assets/css/themify-icons.css\"\r\n-import Form from '../../../components/form/Form';\r\n-import Box from \"../../../components/box/Box\"\r\n-import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n-import Input from '../../../components/input/Input';\r\n-import Button from '../../../components/button/Button';\r\n-\r\n-import { useState } from 'react';\r\n-import { useGetData } from '../../../services/useGetData';\r\n-import { usePostData } from '../../../services/usePostData';\r\n-import { formatTimestamp } from '../../../hooks/formatDate';\r\n-import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n-import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n-\r\n-\r\n-\r\n-const CadastroVeiculo = () => {\r\n-\r\n-    const [marca, setMarca] = useState('')\r\n-    const [modelo, setModelo] = useState('')\r\n-    const [cor, setCor] = useState('')\r\n-    const [placa, setPlaca] = useState('')\r\n-    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n-    const [ano_modelo, setAnoModelo] = useState('')\r\n-    const [renavan, setRenavan] = useState('')\r\n-    const [unidade, setUnidade] = useState('')\r\n-    const [combustivel, setCombustivel] = useState([]);\r\n-    const [selectEstoque, setSelectEstoque] = useState('')\r\n-    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n-    const [cambio, setCambio] = useState('')\r\n-    const [quilometragem, setQuilometragem] = useState('')\r\n-    const [qtd_portas, setQtdPortas] = useState('')\r\n-\r\n-\r\n-    // Busca dados das lojas\r\n-    const { data: dadosLoja } = useGetData(`/lojas`)\r\n-    // Envia os dados do veículo\r\n-    const { loading, createData } = usePostData('/veiculos')\r\n-    const { createEstoqueExtra } = usePostData('/pulmao');\r\n-\r\n-    // Ordena as lojas por descrição\r\n-    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n-\r\n-\r\n-\r\n-    // Função para converter campos em CAIXA ALTA\r\n-    const toUpperFields = (obj, fields = []) => {\r\n-        const copy = { ...obj }\r\n-        fields.forEach((f) => {\r\n-            if (copy[f] !== undefined && copy[f] !== null) {\r\n-                copy[f] = String(copy[f]).toUpperCase()\r\n-            }\r\n-        })\r\n-        return copy\r\n-    }\r\n-\r\n-    // Função para lidar com o envio do formulário\r\n-    const handleSubmit = async (e) => {\r\n-        e.preventDefault()\r\n-\r\n-        const data_registro = formatTimestamp(new Date())\r\n-\r\n-        // Envia nome da loja no campo 'unidade'\r\n-        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n-\r\n-        console.log('Dados a serem enviados: ', dados)\r\n-        // Padroniza para caixa alta\r\n-        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n-        console.log('Dados a serem enviados:', dados);\r\n-\r\n-        // Validação de confirmação\r\n-        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n-        if (!confirmar) return;\r\n-\r\n-        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n-            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n-            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n-        } else {\r\n-            try {\r\n-                // Verifica se a placa já existe antes de enviar os dados\r\n-                const url = selectEstoque === 'pulmao'\r\n-                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n-                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n-\r\n-                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n-\r\n-                if (existente) {\r\n-                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n-                    return;\r\n-\r\n-                } else if (selectEstoque === 'pulmao') {\r\n-                    // Busca a quantidade de veículos na unidade selecionada\r\n-                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n-                    const data = await responseUnidade.json();\r\n-                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n-                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n-\r\n-                    // Busca a quantidade total de vagas da loja\r\n-                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n-                    const dataLoja = await responseLoja.json();\r\n-                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n-                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n-                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n-\r\n-                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n-                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n-                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n-\r\n-                    // Só permite o cadastro se houver vagas disponíveis\r\n-                    if (vagasDisponiveis > 0) {\r\n-                        const dadosUpper = toUpperCaseData(dados);\r\n-                        await createEstoqueExtra(dadosUpper);\r\n-\r\n-                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n-                        //window.location.reload();\r\n-                    } else {\r\n-                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n-                    }\r\n-\r\n-                } else {\r\n-                    // Busca a quantidade de veículos na unidade selecionada\r\n-                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n-                    const data = await responseUnidade.json();\r\n-                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n-                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n-\r\n-                    // Busca a quantidade total de vagas da loja\r\n-                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n-                    const dataLoja = await responseLoja.json();\r\n-                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n-                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n-                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n-\r\n-                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n-                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n-                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n-\r\n-                    // Só permite o cadastro se houver vagas disponíveis\r\n-                    if (vagasDisponiveis > 0) {\r\n-                        const dadosUpper = toUpperCaseData(dados);\r\n-                        await createData(dadosUpper);\r\n-\r\n-                        window.alert('Veículo cadastrado com sucesso');\r\n-                        //window.location.reload();\r\n-                    } else {\r\n-                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n-                    }\r\n-                }\r\n-\r\n-            } catch (err) {\r\n-                console.error('Falha ao registrar o veículo: ', err);\r\n-                window.alert('Erro ao tentar registrar o veículo');\r\n-            }\r\n-        }\r\n-    }\r\n-\r\n-    // Função para lidar com a mudança de unidade\r\n-\r\n-    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n-    const handleUnidadeChange = (e) => {\r\n-        const selectedOption = e.target.selectedOptions[0]\r\n-        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n-        const descricao = selectedOption.getAttribute('data-descricao')\r\n-\r\n-        setUnidade(descricao)\r\n-        setCnpjUnidade(cnpj)\r\n-        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n-    }\r\n-\r\n-    return (\r\n-        <ContainerSecundario>\r\n-            <div className='container d-flex flex-column ' id=\"path\" >\r\n-                <div className=\"d-flex align-items-start \">\r\n-                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n-                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n-                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n-                </div>\r\n-            </div>\r\n-            <div className=\"container d-flex justify-content-center card-container\">\r\n-                <Box>\r\n-                    <div className='panel-heading'>\r\n-                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n-                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n-                    </div>\r\n-                    <Form onSubmit={handleSubmit}>\r\n-                        <div className='col-12 col-md-3' id='select-all'>\r\n-                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n-                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n-                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n-                                {lojasOrdenadas.map((loja) => (\r\n-                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n-                                        {loja.descricao}\r\n-                                    </option>\r\n-                                ))}\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className='col-12 col-md-4' id='select-all'>\r\n-                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n-                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n-                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n-                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n-                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n-                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n-                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n-                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\">\r\n-                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n-                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n-                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n-                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n-                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n-                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n-                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n-                                <option value=\"manual\">MANUAL</option>\r\n-                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n-                            </select>\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-4\">\r\n-                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n-                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n-                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n-                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"col-12 col-md-3\">\r\n-                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n-                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n-                        </div>\r\n-                        <div className=\"d-flex flex-row-reverse\">\r\n-                            <Button type=\"submit\" variant='primary'>ENVIAR</Button>\r\n-                        </div>\r\n-                    </Form>\r\n-                </Box>\r\n-            </div>\r\n-        </ContainerSecundario>\r\n-\r\n-    )\r\n-}\r\n-\r\n-export default CadastroVeiculo\r\n"
                },
                {
                    "date": 1769806256295,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,270 @@\n+import \"../../../assets/css/thead.css\";\r\n+import \"../../../assets/css/themify-icons.css\"\r\n+import Form from '../../../components/form/Form';\r\n+import Box from \"../../../components/box/Box\"\r\n+import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n+import Input from '../../../components/input/Input';\r\n+import Button from '../../../components/button/Button';\r\n+\r\n+import { useState } from 'react';\r\n+import { useGetData } from '../../../services/useGetData';\r\n+import { usePostData } from '../../../services/usePostData';\r\n+import { formatTimestamp } from '../../../hooks/formatDate';\r\n+import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n+import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n+\r\n+\r\n+\r\n+const CadastroVeiculo = () => {\r\n+\r\n+    const [marca, setMarca] = useState('')\r\n+    const [modelo, setModelo] = useState('')\r\n+    const [cor, setCor] = useState('')\r\n+    const [placa, setPlaca] = useState('')\r\n+    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n+    const [ano_modelo, setAnoModelo] = useState('')\r\n+    const [renavan, setRenavan] = useState('')\r\n+    const [unidade, setUnidade] = useState('')\r\n+    const [combustivel, setCombustivel] = useState([]);\r\n+    const [selectEstoque, setSelectEstoque] = useState('')\r\n+    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n+    const [cambio, setCambio] = useState('')\r\n+    const [quilometragem, setQuilometragem] = useState('')\r\n+    const [qtd_portas, setQtdPortas] = useState('')\r\n+\r\n+\r\n+    // Busca dados das lojas\r\n+    const { data: dadosLoja } = useGetData(`/lojas`)\r\n+    // Envia os dados do veículo\r\n+    const { loading, createData } = usePostData('/veiculos')\r\n+    const { createEstoqueExtra } = usePostData('/pulmao');\r\n+\r\n+    // Ordena as lojas por descrição\r\n+    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n+\r\n+\r\n+\r\n+    // Função para converter campos em CAIXA ALTA\r\n+    const toUpperFields = (obj, fields = []) => {\r\n+        const copy = { ...obj }\r\n+        fields.forEach((f) => {\r\n+            if (copy[f] !== undefined && copy[f] !== null) {\r\n+                copy[f] = String(copy[f]).toUpperCase()\r\n+            }\r\n+        })\r\n+        return copy\r\n+    }\r\n+\r\n+    // Função para lidar com o envio do formulário\r\n+    const handleSubmit = async (e) => {\r\n+        e.preventDefault()\r\n+\r\n+        const data_registro = formatTimestamp(new Date())\r\n+\r\n+        // Envia nome da loja no campo 'unidade'\r\n+        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n+\r\n+        console.log('Dados a serem enviados: ', dados)\r\n+        // Padroniza para caixa alta\r\n+        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n+        console.log('Dados a serem enviados:', dados);\r\n+\r\n+        // Validação de confirmação\r\n+        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n+        if (!confirmar) return;\r\n+\r\n+        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n+            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n+            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n+        } else {\r\n+            try {\r\n+                // Verifica se a placa já existe antes de enviar os dados\r\n+                const url = selectEstoque === 'pulmao'\r\n+                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n+                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n+\r\n+                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n+\r\n+                if (existente) {\r\n+                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n+                    return;\r\n+\r\n+                } else if (selectEstoque === 'pulmao') {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createEstoqueExtra(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+\r\n+                } else {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createData(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+                }\r\n+\r\n+            } catch (err) {\r\n+                console.error('Falha ao registrar o veículo: ', err);\r\n+                window.alert('Erro ao tentar registrar o veículo');\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+    // Função para lidar com a mudança de unidade\r\n+\r\n+    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n+    const handleUnidadeChange = (e) => {\r\n+        const selectedOption = e.target.selectedOptions[0]\r\n+        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n+        const descricao = selectedOption.getAttribute('data-descricao')\r\n+\r\n+        setUnidade(descricao)\r\n+        setCnpjUnidade(cnpj)\r\n+        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n+    }\r\n+\r\n+    return (\r\n+        <ContainerSecundario>\r\n+            <div className='container d-flex flex-column ' id=\"path\" >\r\n+                <div className=\"d-flex align-items-start \">\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n+                </div>\r\n+            </div>\r\n+            <div className=\"container d-flex justify-content-center card-container\">\r\n+                <Box>\r\n+                    <div className='panel-heading'>\r\n+                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n+                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n+                    </div>\r\n+                    <Form onSubmit={handleSubmit}>\r\n+                        <div className='col-12 col-md-3' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n+                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n+                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n+                                {lojasOrdenadas.map((loja) => (\r\n+                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n+                                        {loja.descricao}\r\n+                                    </option>\r\n+                                ))}\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className='col-12 col-md-4' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n+                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n+                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n+                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n+                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n+                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n+                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n+                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n+                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n+                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n+                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n+                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n+                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n+                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n+                                <option value=\"manual\">MANUAL</option>\r\n+                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n+                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n+                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n+                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n+                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"d-flex flex-row-reverse\">\r\n+                            <Button type=\"submit\" variant='primary'>\r\n+                                {loading && (\r\n+                                    <div className=\"spinner-grow spinner-grow-sm position-absolute top-0 start-50 translate-middle\" role=\"status\" > </div>\r\n+                                )}\r\n+                                ENVIAR\r\n+                            </Button>\r\n+                        </div>\r\n+                    </Form>\r\n+                </Box>\r\n+            </div>\r\n+        </ContainerSecundario>\r\n+\r\n+    )\r\n+}\r\n+\r\n+export default CadastroVeiculo\r\n"
                },
                {
                    "date": 1769806277286,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,270 @@\n+import \"../../../assets/css/thead.css\";\r\n+import \"../../../assets/css/themify-icons.css\"\r\n+import Form from '../../../components/form/Form';\r\n+import Box from \"../../../components/box/Box\"\r\n+import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n+import Input from '../../../components/input/Input';\r\n+import Button from '../../../components/button/Button';\r\n+\r\n+import { useState } from 'react';\r\n+import { useGetData } from '../../../services/useGetData';\r\n+import { usePostData } from '../../../services/usePostData';\r\n+import { formatTimestamp } from '../../../hooks/formatDate';\r\n+import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n+import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n+\r\n+\r\n+\r\n+const CadastroVeiculo = () => {\r\n+\r\n+    const [marca, setMarca] = useState('')\r\n+    const [modelo, setModelo] = useState('')\r\n+    const [cor, setCor] = useState('')\r\n+    const [placa, setPlaca] = useState('')\r\n+    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n+    const [ano_modelo, setAnoModelo] = useState('')\r\n+    const [renavan, setRenavan] = useState('')\r\n+    const [unidade, setUnidade] = useState('')\r\n+    const [combustivel, setCombustivel] = useState([]);\r\n+    const [selectEstoque, setSelectEstoque] = useState('')\r\n+    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n+    const [cambio, setCambio] = useState('')\r\n+    const [quilometragem, setQuilometragem] = useState('')\r\n+    const [qtd_portas, setQtdPortas] = useState('')\r\n+\r\n+\r\n+    // Busca dados das lojas\r\n+    const { data: dadosLoja } = useGetData(`/lojas`)\r\n+    // Envia os dados do veículo\r\n+    const { loading, createData } = usePostData('/veiculos')\r\n+    const { createEstoqueExtra } = usePostData('/pulmao');\r\n+\r\n+    // Ordena as lojas por descrição\r\n+    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n+\r\n+\r\n+\r\n+    // Função para converter campos em CAIXA ALTA\r\n+    const toUpperFields = (obj, fields = []) => {\r\n+        const copy = { ...obj }\r\n+        fields.forEach((f) => {\r\n+            if (copy[f] !== undefined && copy[f] !== null) {\r\n+                copy[f] = String(copy[f]).toUpperCase()\r\n+            }\r\n+        })\r\n+        return copy\r\n+    }\r\n+\r\n+    // Função para lidar com o envio do formulário\r\n+    const handleSubmit = async (e) => {\r\n+        e.preventDefault()\r\n+\r\n+        const data_registro = formatTimestamp(new Date())\r\n+\r\n+        // Envia nome da loja no campo 'unidade'\r\n+        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n+\r\n+        console.log('Dados a serem enviados: ', dados)\r\n+        // Padroniza para caixa alta\r\n+        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n+        console.log('Dados a serem enviados:', dados);\r\n+\r\n+        // Validação de confirmação\r\n+        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n+        if (!confirmar) return;\r\n+\r\n+        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n+            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n+            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n+        } else {\r\n+            try {\r\n+                // Verifica se a placa já existe antes de enviar os dados\r\n+                const url = selectEstoque === 'pulmao'\r\n+                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n+                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n+\r\n+                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n+\r\n+                if (existente) {\r\n+                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n+                    return;\r\n+\r\n+                } else if (selectEstoque === 'pulmao') {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createEstoqueExtra(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+\r\n+                } else {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createData(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+                }\r\n+\r\n+            } catch (err) {\r\n+                console.error('Falha ao registrar o veículo: ', err);\r\n+                window.alert('Erro ao tentar registrar o veículo');\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+    // Função para lidar com a mudança de unidade\r\n+\r\n+    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n+    const handleUnidadeChange = (e) => {\r\n+        const selectedOption = e.target.selectedOptions[0]\r\n+        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n+        const descricao = selectedOption.getAttribute('data-descricao')\r\n+\r\n+        setUnidade(descricao)\r\n+        setCnpjUnidade(cnpj)\r\n+        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n+    }\r\n+\r\n+    return (\r\n+        <ContainerSecundario>\r\n+            <div className='container d-flex flex-column ' id=\"path\" >\r\n+                <div className=\"d-flex align-items-start \">\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n+                </div>\r\n+            </div>\r\n+            <div className=\"container d-flex justify-content-center card-container\">\r\n+                <Box>\r\n+                    <div className='panel-heading'>\r\n+                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n+                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n+                    </div>\r\n+                    <Form onSubmit={handleSubmit}>\r\n+                        <div className='col-12 col-md-3' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n+                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n+                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n+                                {lojasOrdenadas.map((loja) => (\r\n+                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n+                                        {loja.descricao}\r\n+                                    </option>\r\n+                                ))}\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className='col-12 col-md-4' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n+                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n+                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n+                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n+                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n+                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n+                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n+                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n+                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n+                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n+                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n+                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n+                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n+                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n+                                <option value=\"manual\">MANUAL</option>\r\n+                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n+                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n+                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n+                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n+                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"d-flex flex-row-reverse\">\r\n+                            <Button type=\"submit\" variant='primary'>\r\n+                                {loading && (\r\n+                                    <div className=\"spinner-grow spinner-grow-sm flex-row-start\" role=\"status\" > </div>\r\n+                                )}\r\n+                                ENVIAR\r\n+                            </Button>\r\n+                        </div>\r\n+                    </Form>\r\n+                </Box>\r\n+            </div>\r\n+        </ContainerSecundario>\r\n+\r\n+    )\r\n+}\r\n+\r\n+export default CadastroVeiculo\r\n"
                },
                {
                    "date": 1769806291351,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,270 @@\n+import \"../../../assets/css/thead.css\";\r\n+import \"../../../assets/css/themify-icons.css\"\r\n+import Form from '../../../components/form/Form';\r\n+import Box from \"../../../components/box/Box\"\r\n+import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n+import Input from '../../../components/input/Input';\r\n+import Button from '../../../components/button/Button';\r\n+\r\n+import { useState } from 'react';\r\n+import { useGetData } from '../../../services/useGetData';\r\n+import { usePostData } from '../../../services/usePostData';\r\n+import { formatTimestamp } from '../../../hooks/formatDate';\r\n+import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n+import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n+\r\n+\r\n+\r\n+const CadastroVeiculo = () => {\r\n+\r\n+    const [marca, setMarca] = useState('')\r\n+    const [modelo, setModelo] = useState('')\r\n+    const [cor, setCor] = useState('')\r\n+    const [placa, setPlaca] = useState('')\r\n+    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n+    const [ano_modelo, setAnoModelo] = useState('')\r\n+    const [renavan, setRenavan] = useState('')\r\n+    const [unidade, setUnidade] = useState('')\r\n+    const [combustivel, setCombustivel] = useState([]);\r\n+    const [selectEstoque, setSelectEstoque] = useState('')\r\n+    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n+    const [cambio, setCambio] = useState('')\r\n+    const [quilometragem, setQuilometragem] = useState('')\r\n+    const [qtd_portas, setQtdPortas] = useState('')\r\n+\r\n+\r\n+    // Busca dados das lojas\r\n+    const { data: dadosLoja } = useGetData(`/lojas`)\r\n+    // Envia os dados do veículo\r\n+    const { loading, createData } = usePostData('/veiculos')\r\n+    const { createEstoqueExtra } = usePostData('/pulmao');\r\n+\r\n+    // Ordena as lojas por descrição\r\n+    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n+\r\n+\r\n+\r\n+    // Função para converter campos em CAIXA ALTA\r\n+    const toUpperFields = (obj, fields = []) => {\r\n+        const copy = { ...obj }\r\n+        fields.forEach((f) => {\r\n+            if (copy[f] !== undefined && copy[f] !== null) {\r\n+                copy[f] = String(copy[f]).toUpperCase()\r\n+            }\r\n+        })\r\n+        return copy\r\n+    }\r\n+\r\n+    // Função para lidar com o envio do formulário\r\n+    const handleSubmit = async (e) => {\r\n+        e.preventDefault()\r\n+\r\n+        const data_registro = formatTimestamp(new Date())\r\n+\r\n+        // Envia nome da loja no campo 'unidade'\r\n+        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n+\r\n+        console.log('Dados a serem enviados: ', dados)\r\n+        // Padroniza para caixa alta\r\n+        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n+        console.log('Dados a serem enviados:', dados);\r\n+\r\n+        // Validação de confirmação\r\n+        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n+        if (!confirmar) return;\r\n+\r\n+        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n+            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n+            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n+        } else {\r\n+            try {\r\n+                // Verifica se a placa já existe antes de enviar os dados\r\n+                const url = selectEstoque === 'pulmao'\r\n+                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n+                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n+\r\n+                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n+\r\n+                if (existente) {\r\n+                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n+                    return;\r\n+\r\n+                } else if (selectEstoque === 'pulmao') {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createEstoqueExtra(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+\r\n+                } else {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createData(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+                }\r\n+\r\n+            } catch (err) {\r\n+                console.error('Falha ao registrar o veículo: ', err);\r\n+                window.alert('Erro ao tentar registrar o veículo');\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+    // Função para lidar com a mudança de unidade\r\n+\r\n+    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n+    const handleUnidadeChange = (e) => {\r\n+        const selectedOption = e.target.selectedOptions[0]\r\n+        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n+        const descricao = selectedOption.getAttribute('data-descricao')\r\n+\r\n+        setUnidade(descricao)\r\n+        setCnpjUnidade(cnpj)\r\n+        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n+    }\r\n+\r\n+    return (\r\n+        <ContainerSecundario>\r\n+            <div className='container d-flex flex-column ' id=\"path\" >\r\n+                <div className=\"d-flex align-items-start \">\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n+                </div>\r\n+            </div>\r\n+            <div className=\"container d-flex justify-content-center card-container\">\r\n+                <Box>\r\n+                    <div className='panel-heading'>\r\n+                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n+                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n+                    </div>\r\n+                    <Form onSubmit={handleSubmit}>\r\n+                        <div className='col-12 col-md-3' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n+                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n+                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n+                                {lojasOrdenadas.map((loja) => (\r\n+                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n+                                        {loja.descricao}\r\n+                                    </option>\r\n+                                ))}\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className='col-12 col-md-4' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n+                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n+                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n+                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n+                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n+                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n+                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n+                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n+                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n+                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n+                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n+                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n+                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n+                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n+                                <option value=\"manual\">MANUAL</option>\r\n+                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n+                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n+                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n+                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n+                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"d-flex flex-row-reverse\">\r\n+                            <Button type=\"submit\" variant='primary'>\r\n+                                {loading && (\r\n+                                    <div className=\"spinner-grow spinner-grow-sm flex-row-start\" style role=\"status\" > </div>\r\n+                                )}\r\n+                                ENVIAR\r\n+                            </Button>\r\n+                        </div>\r\n+                    </Form>\r\n+                </Box>\r\n+            </div>\r\n+        </ContainerSecundario>\r\n+\r\n+    )\r\n+}\r\n+\r\n+export default CadastroVeiculo\r\n"
                },
                {
                    "date": 1769806301097,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,270 @@\n+import \"../../../assets/css/thead.css\";\r\n+import \"../../../assets/css/themify-icons.css\"\r\n+import Form from '../../../components/form/Form';\r\n+import Box from \"../../../components/box/Box\"\r\n+import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n+import Input from '../../../components/input/Input';\r\n+import Button from '../../../components/button/Button';\r\n+\r\n+import { useState } from 'react';\r\n+import { useGetData } from '../../../services/useGetData';\r\n+import { usePostData } from '../../../services/usePostData';\r\n+import { formatTimestamp } from '../../../hooks/formatDate';\r\n+import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n+import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n+\r\n+\r\n+\r\n+const CadastroVeiculo = () => {\r\n+\r\n+    const [marca, setMarca] = useState('')\r\n+    const [modelo, setModelo] = useState('')\r\n+    const [cor, setCor] = useState('')\r\n+    const [placa, setPlaca] = useState('')\r\n+    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n+    const [ano_modelo, setAnoModelo] = useState('')\r\n+    const [renavan, setRenavan] = useState('')\r\n+    const [unidade, setUnidade] = useState('')\r\n+    const [combustivel, setCombustivel] = useState([]);\r\n+    const [selectEstoque, setSelectEstoque] = useState('')\r\n+    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n+    const [cambio, setCambio] = useState('')\r\n+    const [quilometragem, setQuilometragem] = useState('')\r\n+    const [qtd_portas, setQtdPortas] = useState('')\r\n+\r\n+\r\n+    // Busca dados das lojas\r\n+    const { data: dadosLoja } = useGetData(`/lojas`)\r\n+    // Envia os dados do veículo\r\n+    const { loading, createData } = usePostData('/veiculos')\r\n+    const { createEstoqueExtra } = usePostData('/pulmao');\r\n+\r\n+    // Ordena as lojas por descrição\r\n+    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n+\r\n+\r\n+\r\n+    // Função para converter campos em CAIXA ALTA\r\n+    const toUpperFields = (obj, fields = []) => {\r\n+        const copy = { ...obj }\r\n+        fields.forEach((f) => {\r\n+            if (copy[f] !== undefined && copy[f] !== null) {\r\n+                copy[f] = String(copy[f]).toUpperCase()\r\n+            }\r\n+        })\r\n+        return copy\r\n+    }\r\n+\r\n+    // Função para lidar com o envio do formulário\r\n+    const handleSubmit = async (e) => {\r\n+        e.preventDefault()\r\n+\r\n+        const data_registro = formatTimestamp(new Date())\r\n+\r\n+        // Envia nome da loja no campo 'unidade'\r\n+        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n+\r\n+        console.log('Dados a serem enviados: ', dados)\r\n+        // Padroniza para caixa alta\r\n+        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n+        console.log('Dados a serem enviados:', dados);\r\n+\r\n+        // Validação de confirmação\r\n+        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n+        if (!confirmar) return;\r\n+\r\n+        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n+            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n+            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n+        } else {\r\n+            try {\r\n+                // Verifica se a placa já existe antes de enviar os dados\r\n+                const url = selectEstoque === 'pulmao'\r\n+                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n+                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n+\r\n+                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n+\r\n+                if (existente) {\r\n+                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n+                    return;\r\n+\r\n+                } else if (selectEstoque === 'pulmao') {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createEstoqueExtra(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+\r\n+                } else {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createData(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+                }\r\n+\r\n+            } catch (err) {\r\n+                console.error('Falha ao registrar o veículo: ', err);\r\n+                window.alert('Erro ao tentar registrar o veículo');\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+    // Função para lidar com a mudança de unidade\r\n+\r\n+    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n+    const handleUnidadeChange = (e) => {\r\n+        const selectedOption = e.target.selectedOptions[0]\r\n+        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n+        const descricao = selectedOption.getAttribute('data-descricao')\r\n+\r\n+        setUnidade(descricao)\r\n+        setCnpjUnidade(cnpj)\r\n+        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n+    }\r\n+\r\n+    return (\r\n+        <ContainerSecundario>\r\n+            <div className='container d-flex flex-column ' id=\"path\" >\r\n+                <div className=\"d-flex align-items-start \">\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n+                </div>\r\n+            </div>\r\n+            <div className=\"container d-flex justify-content-center card-container\">\r\n+                <Box>\r\n+                    <div className='panel-heading'>\r\n+                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n+                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n+                    </div>\r\n+                    <Form onSubmit={handleSubmit}>\r\n+                        <div className='col-12 col-md-3' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n+                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n+                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n+                                {lojasOrdenadas.map((loja) => (\r\n+                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n+                                        {loja.descricao}\r\n+                                    </option>\r\n+                                ))}\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className='col-12 col-md-4' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n+                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n+                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n+                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n+                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n+                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n+                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n+                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n+                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n+                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n+                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n+                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n+                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n+                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n+                                <option value=\"manual\">MANUAL</option>\r\n+                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n+                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n+                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n+                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n+                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"d-flex flex-row-reverse\">\r\n+                            <Button type=\"submit\" variant='primary'>\r\n+                                {loading && (\r\n+                                    <div className=\"spinner-grow spinner-grow-sm flex-row-start\" style={{mar}} role=\"status\" > </div>\r\n+                                )}\r\n+                                ENVIAR\r\n+                            </Button>\r\n+                        </div>\r\n+                    </Form>\r\n+                </Box>\r\n+            </div>\r\n+        </ContainerSecundario>\r\n+\r\n+    )\r\n+}\r\n+\r\n+export default CadastroVeiculo\r\n"
                },
                {
                    "date": 1769806306652,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,270 @@\n+import \"../../../assets/css/thead.css\";\r\n+import \"../../../assets/css/themify-icons.css\"\r\n+import Form from '../../../components/form/Form';\r\n+import Box from \"../../../components/box/Box\"\r\n+import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n+import Input from '../../../components/input/Input';\r\n+import Button from '../../../components/button/Button';\r\n+\r\n+import { useState } from 'react';\r\n+import { useGetData } from '../../../services/useGetData';\r\n+import { usePostData } from '../../../services/usePostData';\r\n+import { formatTimestamp } from '../../../hooks/formatDate';\r\n+import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n+import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n+\r\n+\r\n+\r\n+const CadastroVeiculo = () => {\r\n+\r\n+    const [marca, setMarca] = useState('')\r\n+    const [modelo, setModelo] = useState('')\r\n+    const [cor, setCor] = useState('')\r\n+    const [placa, setPlaca] = useState('')\r\n+    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n+    const [ano_modelo, setAnoModelo] = useState('')\r\n+    const [renavan, setRenavan] = useState('')\r\n+    const [unidade, setUnidade] = useState('')\r\n+    const [combustivel, setCombustivel] = useState([]);\r\n+    const [selectEstoque, setSelectEstoque] = useState('')\r\n+    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n+    const [cambio, setCambio] = useState('')\r\n+    const [quilometragem, setQuilometragem] = useState('')\r\n+    const [qtd_portas, setQtdPortas] = useState('')\r\n+\r\n+\r\n+    // Busca dados das lojas\r\n+    const { data: dadosLoja } = useGetData(`/lojas`)\r\n+    // Envia os dados do veículo\r\n+    const { loading, createData } = usePostData('/veiculos')\r\n+    const { createEstoqueExtra } = usePostData('/pulmao');\r\n+\r\n+    // Ordena as lojas por descrição\r\n+    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n+\r\n+\r\n+\r\n+    // Função para converter campos em CAIXA ALTA\r\n+    const toUpperFields = (obj, fields = []) => {\r\n+        const copy = { ...obj }\r\n+        fields.forEach((f) => {\r\n+            if (copy[f] !== undefined && copy[f] !== null) {\r\n+                copy[f] = String(copy[f]).toUpperCase()\r\n+            }\r\n+        })\r\n+        return copy\r\n+    }\r\n+\r\n+    // Função para lidar com o envio do formulário\r\n+    const handleSubmit = async (e) => {\r\n+        e.preventDefault()\r\n+\r\n+        const data_registro = formatTimestamp(new Date())\r\n+\r\n+        // Envia nome da loja no campo 'unidade'\r\n+        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n+\r\n+        console.log('Dados a serem enviados: ', dados)\r\n+        // Padroniza para caixa alta\r\n+        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n+        console.log('Dados a serem enviados:', dados);\r\n+\r\n+        // Validação de confirmação\r\n+        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n+        if (!confirmar) return;\r\n+\r\n+        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n+            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n+            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n+        } else {\r\n+            try {\r\n+                // Verifica se a placa já existe antes de enviar os dados\r\n+                const url = selectEstoque === 'pulmao'\r\n+                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n+                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n+\r\n+                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n+\r\n+                if (existente) {\r\n+                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n+                    return;\r\n+\r\n+                } else if (selectEstoque === 'pulmao') {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createEstoqueExtra(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+\r\n+                } else {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createData(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+                }\r\n+\r\n+            } catch (err) {\r\n+                console.error('Falha ao registrar o veículo: ', err);\r\n+                window.alert('Erro ao tentar registrar o veículo');\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+    // Função para lidar com a mudança de unidade\r\n+\r\n+    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n+    const handleUnidadeChange = (e) => {\r\n+        const selectedOption = e.target.selectedOptions[0]\r\n+        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n+        const descricao = selectedOption.getAttribute('data-descricao')\r\n+\r\n+        setUnidade(descricao)\r\n+        setCnpjUnidade(cnpj)\r\n+        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n+    }\r\n+\r\n+    return (\r\n+        <ContainerSecundario>\r\n+            <div className='container d-flex flex-column ' id=\"path\" >\r\n+                <div className=\"d-flex align-items-start \">\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n+                </div>\r\n+            </div>\r\n+            <div className=\"container d-flex justify-content-center card-container\">\r\n+                <Box>\r\n+                    <div className='panel-heading'>\r\n+                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n+                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n+                    </div>\r\n+                    <Form onSubmit={handleSubmit}>\r\n+                        <div className='col-12 col-md-3' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n+                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n+                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n+                                {lojasOrdenadas.map((loja) => (\r\n+                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n+                                        {loja.descricao}\r\n+                                    </option>\r\n+                                ))}\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className='col-12 col-md-4' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n+                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n+                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n+                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n+                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n+                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n+                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n+                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n+                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n+                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n+                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n+                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n+                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n+                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n+                                <option value=\"manual\">MANUAL</option>\r\n+                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n+                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n+                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n+                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n+                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"d-flex flex-row-reverse\">\r\n+                            <Button type=\"submit\" variant='primary'>\r\n+                                {loading && (\r\n+                                    <div className=\"spinner-grow spinner-grow-sm flex-row-start\" style={{marginRight: '10px'}} role=\"status\" > </div>\r\n+                                )}\r\n+                                ENVIAR\r\n+                            </Button>\r\n+                        </div>\r\n+                    </Form>\r\n+                </Box>\r\n+            </div>\r\n+        </ContainerSecundario>\r\n+\r\n+    )\r\n+}\r\n+\r\n+export default CadastroVeiculo\r\n"
                },
                {
                    "date": 1769806312797,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -253,9 +253,9 @@\n                         </div>\r\n                         <div className=\"d-flex flex-row-reverse\">\r\n                             <Button type=\"submit\" variant='primary'>\r\n                                 {loading && (\r\n-                                    <div className=\"spinner-grow spinner-grow-sm flex-row-start\" style={{marginRight: '10px'}} role=\"status\" > </div>\r\n+                                    <div className=\"spinner-grow spinner-grow-sm flex-row-start\" style={{marginRight: 'px'}} role=\"status\" > </div>\r\n                                 )}\r\n                                 ENVIAR\r\n                             </Button>\r\n                         </div>\r\n"
                },
                {
                    "date": 1769806357691,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,270 @@\n+import \"../../../assets/css/thead.css\";\r\n+import \"../../../assets/css/themify-icons.css\"\r\n+import Form from '../../../components/form/Form';\r\n+import Box from \"../../../components/box/Box\"\r\n+import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n+import Input from '../../../components/input/Input';\r\n+import Button from '../../../components/button/Button';\r\n+\r\n+import { useState } from 'react';\r\n+import { useGetData } from '../../../services/useGetData';\r\n+import { usePostData } from '../../../services/usePostData';\r\n+import { formatTimestamp } from '../../../hooks/formatDate';\r\n+import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n+import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n+\r\n+\r\n+\r\n+const CadastroVeiculo = () => {\r\n+\r\n+    const [marca, setMarca] = useState('')\r\n+    const [modelo, setModelo] = useState('')\r\n+    const [cor, setCor] = useState('')\r\n+    const [placa, setPlaca] = useState('')\r\n+    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n+    const [ano_modelo, setAnoModelo] = useState('')\r\n+    const [renavan, setRenavan] = useState('')\r\n+    const [unidade, setUnidade] = useState('')\r\n+    const [combustivel, setCombustivel] = useState([]);\r\n+    const [selectEstoque, setSelectEstoque] = useState('')\r\n+    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n+    const [cambio, setCambio] = useState('')\r\n+    const [quilometragem, setQuilometragem] = useState('')\r\n+    const [qtd_portas, setQtdPortas] = useState('')\r\n+\r\n+\r\n+    // Busca dados das lojas\r\n+    const { data: dadosLoja } = useGetData(`/lojas`)\r\n+    // Envia os dados do veículo\r\n+    const { loading, createData } = usePostData('/veiculos')\r\n+    const { createEstoqueExtra } = usePostData('/pulmao');\r\n+\r\n+    // Ordena as lojas por descrição\r\n+    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n+\r\n+\r\n+\r\n+    // Função para converter campos em CAIXA ALTA\r\n+    const toUpperFields = (obj, fields = []) => {\r\n+        const copy = { ...obj }\r\n+        fields.forEach((f) => {\r\n+            if (copy[f] !== undefined && copy[f] !== null) {\r\n+                copy[f] = String(copy[f]).toUpperCase()\r\n+            }\r\n+        })\r\n+        return copy\r\n+    }\r\n+\r\n+    // Função para lidar com o envio do formulário\r\n+    const handleSubmit = async (e) => {\r\n+        e.preventDefault()\r\n+\r\n+        const data_registro = formatTimestamp(new Date())\r\n+\r\n+        // Envia nome da loja no campo 'unidade'\r\n+        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n+\r\n+        console.log('Dados a serem enviados: ', dados)\r\n+        // Padroniza para caixa alta\r\n+        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n+        console.log('Dados a serem enviados:', dados);\r\n+\r\n+        // Validação de confirmação\r\n+        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n+        if (!confirmar) return;\r\n+\r\n+        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n+            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n+            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n+        } else {\r\n+            try {\r\n+                // Verifica se a placa já existe antes de enviar os dados\r\n+                const url = selectEstoque === 'pulmao'\r\n+                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n+                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n+\r\n+                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n+\r\n+                if (existente) {\r\n+                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n+                    return;\r\n+\r\n+                } else if (selectEstoque === 'pulmao') {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createEstoqueExtra(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+\r\n+                } else {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createData(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+                }\r\n+\r\n+            } catch (err) {\r\n+                console.error('Falha ao registrar o veículo: ', err);\r\n+                window.alert('Erro ao tentar registrar o veículo');\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+    // Função para lidar com a mudança de unidade\r\n+\r\n+    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n+    const handleUnidadeChange = (e) => {\r\n+        const selectedOption = e.target.selectedOptions[0]\r\n+        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n+        const descricao = selectedOption.getAttribute('data-descricao')\r\n+\r\n+        setUnidade(descricao)\r\n+        setCnpjUnidade(cnpj)\r\n+        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n+    }\r\n+\r\n+    return (\r\n+        <ContainerSecundario>\r\n+            <div className='container d-flex flex-column ' id=\"path\" >\r\n+                <div className=\"d-flex align-items-start \">\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n+                </div>\r\n+            </div>\r\n+            <div className=\"container d-flex justify-content-center card-container\">\r\n+                <Box>\r\n+                    <div className='panel-heading'>\r\n+                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n+                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n+                    </div>\r\n+                    <Form onSubmit={handleSubmit}>\r\n+                        <div className='col-12 col-md-3' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n+                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n+                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n+                                {lojasOrdenadas.map((loja) => (\r\n+                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n+                                        {loja.descricao}\r\n+                                    </option>\r\n+                                ))}\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className='col-12 col-md-4' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n+                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n+                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n+                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n+                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n+                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n+                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n+                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n+                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n+                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n+                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n+                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n+                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n+                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n+                                <option value=\"manual\">MANUAL</option>\r\n+                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n+                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n+                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n+                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n+                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"d-flex flex-row-reverse\">\r\n+                            <Button type=\"submit\" variant='primary'>\r\n+                                {loading && (\r\n+                                    <div className=\"spinner-grow spinner-grow-sm flex-row-start\" style={{marginRight: '10px'}} role=\"status\" > </div>\r\n+                                )}\r\n+                                ENVIAR\r\n+                            </Button>\r\n+                        </div>\r\n+                    </Form>\r\n+                </Box>\r\n+            </div>\r\n+        </ContainerSecundario>\r\n+\r\n+    )\r\n+}\r\n+\r\n+export default CadastroVeiculo\r\n"
                },
                {
                    "date": 1769806380326,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,270 @@\n+import \"../../../assets/css/thead.css\";\r\n+import \"../../../assets/css/themify-icons.css\"\r\n+import Form from '../../../components/form/Form';\r\n+import Box from \"../../../components/box/Box\"\r\n+import ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\n+import Input from '../../../components/input/Input';\r\n+import Button from '../../../components/button/Button';\r\n+\r\n+import { useState } from 'react';\r\n+import { useGetData } from '../../../services/useGetData';\r\n+import { usePostData } from '../../../services/usePostData';\r\n+import { formatTimestamp } from '../../../hooks/formatDate';\r\n+import { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\n+import { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n+\r\n+\r\n+\r\n+const CadastroVeiculo = () => {\r\n+\r\n+    const [marca, setMarca] = useState('')\r\n+    const [modelo, setModelo] = useState('')\r\n+    const [cor, setCor] = useState('')\r\n+    const [placa, setPlaca] = useState('')\r\n+    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n+    const [ano_modelo, setAnoModelo] = useState('')\r\n+    const [renavan, setRenavan] = useState('')\r\n+    const [unidade, setUnidade] = useState('')\r\n+    const [combustivel, setCombustivel] = useState([]);\r\n+    const [selectEstoque, setSelectEstoque] = useState('')\r\n+    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n+    const [cambio, setCambio] = useState('')\r\n+    const [quilometragem, setQuilometragem] = useState('')\r\n+    const [qtd_portas, setQtdPortas] = useState('')\r\n+\r\n+\r\n+    // Busca dados das lojas\r\n+    const { data: dadosLoja } = useGetData(`/lojas`)\r\n+    // Envia os dados do veículo\r\n+    const { loading, createData } = usePostData('/veiculos')\r\n+    const { createEstoqueExtra } = usePostData('/pulmao');\r\n+\r\n+    // Ordena as lojas por descrição\r\n+    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n+\r\n+\r\n+\r\n+    // Função para converter campos em CAIXA ALTA\r\n+    const toUpperFields = (obj, fields = []) => {\r\n+        const copy = { ...obj }\r\n+        fields.forEach((f) => {\r\n+            if (copy[f] !== undefined && copy[f] !== null) {\r\n+                copy[f] = String(copy[f]).toUpperCase()\r\n+            }\r\n+        })\r\n+        return copy\r\n+    }\r\n+\r\n+    // Função para lidar com o envio do formulário\r\n+    const handleSubmit = async (e) => {\r\n+        e.preventDefault()\r\n+\r\n+        const data_registro = formatTimestamp(new Date())\r\n+\r\n+        // Envia nome da loja no campo 'unidade'\r\n+        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n+\r\n+        console.log('Dados a serem enviados: ', dados)\r\n+        // Padroniza para caixa alta\r\n+        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n+        console.log('Dados a serem enviados:', dados);\r\n+\r\n+        // Validação de confirmação\r\n+        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n+        if (!confirmar) return;\r\n+\r\n+        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n+            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n+            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n+        } else {\r\n+            try {\r\n+                // Verifica se a placa já existe antes de enviar os dados\r\n+                const url = selectEstoque === 'pulmao'\r\n+                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n+                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n+\r\n+                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n+\r\n+                if (existente) {\r\n+                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n+                    return;\r\n+\r\n+                } else if (selectEstoque === 'pulmao') {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createEstoqueExtra(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+\r\n+                } else {\r\n+                    // Busca a quantidade de veículos na unidade selecionada\r\n+                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n+                    const data = await responseUnidade.json();\r\n+                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n+                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n+\r\n+                    // Busca a quantidade total de vagas da loja\r\n+                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n+                    const dataLoja = await responseLoja.json();\r\n+                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n+                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n+                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n+\r\n+                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n+                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n+                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n+\r\n+                    // Só permite o cadastro se houver vagas disponíveis\r\n+                    if (vagasDisponiveis > 0) {\r\n+                        const dadosUpper = toUpperCaseData(dados);\r\n+                        await createData(dadosUpper);\r\n+\r\n+                        window.alert('Veículo cadastrado com sucesso');\r\n+                        //window.location.reload();\r\n+                    } else {\r\n+                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n+                    }\r\n+                }\r\n+\r\n+            } catch (err) {\r\n+                console.error('Falha ao registrar o veículo: ', err);\r\n+                window.alert('Erro ao tentar registrar o veículo');\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+    // Função para lidar com a mudança de unidade\r\n+\r\n+    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n+    const handleUnidadeChange = (e) => {\r\n+        const selectedOption = e.target.selectedOptions[0]\r\n+        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n+        const descricao = selectedOption.getAttribute('data-descricao')\r\n+\r\n+        setUnidade(descricao)\r\n+        setCnpjUnidade(cnpj)\r\n+        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n+    }\r\n+\r\n+    return (\r\n+        <ContainerSecundario>\r\n+            <div className='container d-flex flex-column ' id=\"path\" >\r\n+                <div className=\"d-flex align-items-start \">\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n+                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n+                </div>\r\n+            </div>\r\n+            <div className=\"container d-flex justify-content-center card-container\">\r\n+                <Box>\r\n+                    <div className='panel-heading'>\r\n+                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n+                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n+                    </div>\r\n+                    <Form onSubmit={handleSubmit}>\r\n+                        <div className='col-12 col-md-3' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n+                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n+                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n+                                {lojasOrdenadas.map((loja) => (\r\n+                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n+                                        {loja.descricao}\r\n+                                    </option>\r\n+                                ))}\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className='col-12 col-md-4' id='select-all'>\r\n+                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n+                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n+                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n+                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n+                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n+                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n+                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n+                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n+                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n+                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n+                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n+                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n+                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n+                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n+                                <option value=\"manual\">MANUAL</option>\r\n+                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n+                            </select>\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-4\">\r\n+                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n+                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n+                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n+                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"col-12 col-md-3\">\r\n+                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n+                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n+                        </div>\r\n+                        <div className=\"d-flex flex-row-reverse\">\r\n+                            <Button type=\"submit\" variant='primary'>\r\n+                                {loading && (\r\n+                                    <div className=\"spinner-grow spinner-grow-sm flex-row-start\" style={{marginRight: '15px'}} role=\"status\" > </div>\r\n+                                )}\r\n+                                ENVIAR\r\n+                            </Button>\r\n+                        </div>\r\n+                    </Form>\r\n+                </Box>\r\n+            </div>\r\n+        </ContainerSecundario>\r\n+\r\n+    )\r\n+}\r\n+\r\n+export default CadastroVeiculo\r\n"
                }
            ],
            "date": 1769805228534,
            "name": "Commit-0",
            "content": "import \"../../../assets/css/thead.css\";\r\nimport \"../../../assets/css/themify-icons.css\"\r\nimport Form from '../../../components/form/Form';\r\nimport Box from \"../../../components/box/Box\"\r\nimport ContainerSecundario from \"../../../components/container/ContainerSecundario\"\r\nimport Input from '../../../components/input/Input';\r\nimport Button from '../../../components/button/Button';\r\n\r\nimport { useState } from 'react';\r\nimport { useGetData } from '../../../services/useGetData';\r\nimport { usePostData } from '../../../services/usePostData';\r\nimport { formatTimestamp } from '../../../hooks/formatDate';\r\nimport { toUpperCaseData } from '../../../hooks/transformToUppercase';\r\nimport { onlyNumbers, formatMillionUnit } from \"../../../hooks/useMask\";\r\n\r\n\r\n\r\nconst CadastroVeiculo = () => {\r\n\r\n    const [marca, setMarca] = useState('')\r\n    const [modelo, setModelo] = useState('')\r\n    const [cor, setCor] = useState('')\r\n    const [placa, setPlaca] = useState('')\r\n    const [ano_fabricacao, setAnoFabricacao] = useState('')\r\n    const [ano_modelo, setAnoModelo] = useState('')\r\n    const [renavan, setRenavan] = useState('')\r\n    const [unidade, setUnidade] = useState('')\r\n    const [combustivel, setCombustivel] = useState([]);\r\n    const [selectEstoque, setSelectEstoque] = useState('')\r\n    const [cnpj_unidade, setCnpjUnidade] = useState('')\r\n    const [cambio, setCambio] = useState('')\r\n    const [quilometragem, setQuilometragem] = useState('')\r\n    const [qtd_portas, setQtdPortas] = useState('')\r\n\r\n\r\n    // Busca dados das lojas\r\n    const { data: dadosLoja } = useGetData(`/lojas`)\r\n    // Envia os dados do veículo\r\n    const { loading, createData } = usePostData('/veiculos')\r\n    const { createEstoqueExtra } = usePostData('/pulmao');\r\n\r\n    // Ordena as lojas por descrição\r\n    const lojasOrdenadas = dadosLoja.sort((a, b) => a.descricao.localeCompare(b.descricao))\r\n\r\n\r\n\r\n    // Função para converter campos em CAIXA ALTA\r\n    const toUpperFields = (obj, fields = []) => {\r\n        const copy = { ...obj }\r\n        fields.forEach((f) => {\r\n            if (copy[f] !== undefined && copy[f] !== null) {\r\n                copy[f] = String(copy[f]).toUpperCase()\r\n            }\r\n        })\r\n        return copy\r\n    }\r\n\r\n    // Função para lidar com o envio do formulário\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault()\r\n\r\n        const data_registro = formatTimestamp(new Date())\r\n\r\n        // Envia nome da loja no campo 'unidade'\r\n        let dados = { placa, data_registro, unidade, marca, modelo, cor, ano_fabricacao, ano_modelo, renavan, cnpj_unidade, combustivel, qtd_portas }\r\n\r\n        console.log('Dados a serem enviados: ', dados)\r\n        // Padroniza para caixa alta\r\n        dados = toUpperFields(dados, ['placa', 'marca', 'modelo', 'cor', 'unidade', 'combustivel']);\r\n        console.log('Dados a serem enviados:', dados);\r\n\r\n        // Validação de confirmação\r\n        const confirmar = window.confirm(\"Confirma o cadastro do veículo?\");\r\n        if (!confirmar) return;\r\n\r\n        if (confirmar && placa === \"\" || marca === \"\" || modelo === \"\" || cor === \"\" || quilometragem === \"\" || cambio === \"\"\r\n            || qtd_portas === \"\" || renavan === \"\" || ano_fabricacao === \"\" || ano_modelo === \"\" || unidade === \"\" || selectEstoque === \"\") {\r\n            window.alert(\"Por favor, verifique o formulario novamente Todos os campos precisam ser preenchidos.\")\r\n        } else {\r\n            try {\r\n                // Verifica se a placa já existe antes de enviar os dados\r\n                const url = selectEstoque === 'pulmao'\r\n                    ? `${import.meta.env.VITE_API_BASE_URL}/pulmao/placa/${dados.placa}`\r\n                    : `${import.meta.env.VITE_API_BASE_URL}/veiculos/placa/${dados.placa}`;\r\n\r\n                const existente = await fetch(url).then((res) => res.ok ? res.json() : null);\r\n\r\n                if (existente) {\r\n                    window.alert(\"Já existe um veículo cadastrado com esta placa!\");\r\n                    return;\r\n\r\n                } else if (selectEstoque === 'pulmao') {\r\n                    // Busca a quantidade de veículos na unidade selecionada\r\n                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/pulmao/unidade/${unidade}`);\r\n                    const data = await responseUnidade.json();\r\n                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n\r\n                    // Busca a quantidade total de vagas da loja\r\n                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n                    const dataLoja = await responseLoja.json();\r\n                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n                    const vagasTotais = parseInt(loja.qtdEstoqueExtra, 10);\r\n                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n\r\n                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n\r\n                    // Só permite o cadastro se houver vagas disponíveis\r\n                    if (vagasDisponiveis > 0) {\r\n                        const dadosUpper = toUpperCaseData(dados);\r\n                        await createEstoqueExtra(dadosUpper);\r\n\r\n                        window.alert('Veículo cadastrado no Pulmao com sucesso');\r\n                        //window.location.reload();\r\n                    } else {\r\n                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n                    }\r\n\r\n                } else {\r\n                    // Busca a quantidade de veículos na unidade selecionada\r\n                    const responseUnidade = await fetch(`${import.meta.env.VITE_API_BASE_URL}/veiculos/unidade/${unidade}`);\r\n                    const data = await responseUnidade.json();\r\n                    const filteredResults = data.filter((veiculo) => veiculo.placa !== \"\").length;\r\n                    console.log(\"Quantidade de veiculos: \", filteredResults);\r\n\r\n                    // Busca a quantidade total de vagas da loja\r\n                    const responseLoja = await fetch(`${import.meta.env.VITE_API_BASE_URL}/lojas`);\r\n                    const dataLoja = await responseLoja.json();\r\n                    const loja = dataLoja.find((loja) => loja.descricao === dados.unidade);\r\n                    const vagasTotais = parseInt(loja.qtdVeiculos, 10);\r\n                    console.log(\"Quantidade de vagas informadas no cadastro da loja: \", vagasTotais);\r\n\r\n                    //Vagas disponiveis sera obtido da subtração das vagas totais informado no cadastro da loja menos a quantidade de veiculos ja cadastrados\r\n                    const vagasDisponiveis = vagasTotais - filteredResults;\r\n                    console.log(`Quantidade de vagas disponíveis: ${vagasDisponiveis - 1}`);\r\n\r\n                    // Só permite o cadastro se houver vagas disponíveis\r\n                    if (vagasDisponiveis > 0) {\r\n                        const dadosUpper = toUpperCaseData(dados);\r\n                        await createData(dadosUpper);\r\n\r\n                        window.alert('Veículo cadastrado com sucesso');\r\n                        //window.location.reload();\r\n                    } else {\r\n                        window.alert('Não há vagas disponíveis para esta loja. Cadastro não realizado.');\r\n                    }\r\n                }\r\n\r\n            } catch (err) {\r\n                console.error('Falha ao registrar o veículo: ', err);\r\n                window.alert('Erro ao tentar registrar o veículo');\r\n            }\r\n        }\r\n    }\r\n\r\n    // Função para lidar com a mudança de unidade\r\n\r\n    // Função para lidar com a seleção de unidade e busca do CNPJ\r\n    const handleUnidadeChange = (e) => {\r\n        const selectedOption = e.target.selectedOptions[0]\r\n        const cnpj = selectedOption.getAttribute('data-cnpj')\r\n        const descricao = selectedOption.getAttribute('data-descricao')\r\n\r\n        setUnidade(descricao)\r\n        setCnpjUnidade(cnpj)\r\n        console.log('State atualizado - Loja:', descricao, 'CNPJ:', cnpj);\r\n    }\r\n\r\n    return (\r\n        <ContainerSecundario>\r\n            <div className='container d-flex flex-column ' id=\"path\" >\r\n                <div className=\"d-flex align-items-start \">\r\n                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/\">Gestão</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n                    <div className=\"p-2\"> <a className=\"link_a\" href=\"/gestao_estoque\">Gestão de Estoque</a> </div> <div className=\"p-2\"> <i className=' ti ti-angle-right ' id='card-path' /> </div>\r\n                    <div className=\"p-2\"> <p className='atual'>Cadastro de Veículos</p> </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"container d-flex justify-content-center card-container\">\r\n                <Box>\r\n                    <div className='panel-heading'>\r\n                        <i className='ti ti-car' id=\"ti-black\"></i>\r\n                        <p>CADASTRO DE VEICULOS SEM CONSULTA À BASE BIN <br /> Selecione a loja e informe os demais dados do veículo.</p>\r\n                    </div>\r\n                    <Form onSubmit={handleSubmit}>\r\n                        <div className='col-12 col-md-3' id='select-all'>\r\n                            <label className=\"label\" id=\"select-label\"><span>Loja:</span></label>\r\n                            <select type='text' name='loja' value={unidade} onChange={handleUnidadeChange} className=\"select-item\" required >\r\n                                <option value=\"\" >SELECIONE UMA LOJA</option>\r\n                                {lojasOrdenadas.map((loja) => (\r\n                                    <option key={loja.descricao} value={loja.descricao} data-descricao={loja.descricao}>\r\n                                        {loja.descricao}\r\n                                    </option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n                        <div className='col-12 col-md-4' id='select-all'>\r\n                            <label className=\"label\" id=\"select-label\"><span>Estoque:</span></label>\r\n                            <select type='text' name='loja' value={selectEstoque} onChange={(e) => setSelectEstoque(e.target.value)} className=\"select-item\" required >\r\n                                <option value='' >SELECIONE UM ESTOQUE</option>\r\n                                <option value='veiculos'>ESTOQUE PRINCIPAL</option>\r\n                                <option values='pulmao'>ESTOQUE EXTRA</option>\r\n                            </select>\r\n                        </div>\r\n                        <div className=\"col-12 col-md-3\">\r\n                            <Input label={\"Placa:\"} type={\"text\"} maxLength={\"7\"} style={{ width: '80px' }} nameInput={\"placa\"}\r\n                                value={placa} onChange={(e) => setPlaca(e.target.value)} required />\r\n                        </div>\r\n                        <div className=\"col-12 col-md-3\">\r\n                            <Input label={\"Marca:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"marca\"}\r\n                                value={marca} onChange={(e) => setMarca(e.target.value)} required />\r\n                        </div>\r\n                        <div className=\"col-12 col-md-3\">\r\n                            <Input label={\"Modelo:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"modelo\"}\r\n                                value={modelo} onChange={(e) => setModelo(e.target.value)} required />\r\n                        </div>\r\n                        <div className=\"col-12 col-md-4\">\r\n                            <Input label={\"Cor:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"cor\"}\r\n                                value={cor} onChange={(e) => setCor(e.target.value)} required />\r\n                        </div>\r\n                        <div className=\"col-12 col-md-3\">\r\n                            <Input label={\"Combustível:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"combustivel\"} value={combustivel}\r\n                                onChange={(e) => setCombustivel(e.target.value)} required />\r\n                        </div>\r\n                        <div className=\"col-12 col-md-3\">\r\n                            <Input label={\"Km:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"quilometragem\"} value={quilometragem}\r\n                                onChange={(e) => setQuilometragem(formatMillionUnit(e.target.value))} required />\r\n                        </div>\r\n                        <div className=\"col-12 col-md-4\" id=\"select-all\">\r\n                            <label className=\"label\" id=\"select-label\"><span>Câmbio:</span></label>\r\n                            <select label={\"Cambio:\"} type={\"text\"} style={{ width: '260px' }} value={cambio} onChange={(e) => setCambio(e.target.value)}>\r\n                                <option value=\"\">SELECIONE O TIPO DE CÂMBIO</option>\r\n                                <option value=\"manual\">MANUAL</option>\r\n                                <option value=\"automatico\">AUTOMÁTICO</option>\r\n                            </select>\r\n                        </div>\r\n                        <div className=\"col-12 col-md-4\">\r\n                            <Input label={\"Qtd Portas:\"} type={\"text\"} style={{ width: '50px' }} nameInput={\"qtdPortas\"} value={qtd_portas}\r\n                                onChange={(e) => setQtdPortas(e.target.value)} required />\r\n                        </div>\r\n                        <div className=\"col-12 col-md-3\">\r\n                            <Input label={\"Ano Fabricacao:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoFabricacao\"}\r\n                                value={ano_fabricacao} onChange={(e) => setAnoFabricacao(onlyNumbers(e.target.value))} required />\r\n                        </div>\r\n                        <div className=\"col-12 col-md-3\">\r\n                            <Input label={\"Ano Modelo:\"} type={\"text\"} maxLength={4} style={{ width: '80px' }} nameInput={\"anoModelo\"}\r\n                                value={ano_modelo} onChange={(e) => setAnoModelo(onlyNumbers(e.target.value))} required />\r\n                        </div>\r\n                        <div className=\"col-12 col-md-3\">\r\n                            <Input label={\"Renavam:\"} type={\"text\"} style={{ width: '150px' }} nameInput={\"renavam\"}\r\n                                value={renavan} onChange={(e) => setRenavan(onlyNumbers(e.target.value))} required />\r\n                        </div>\r\n                        <div className=\"d-flex flex-row-reverse\">\r\n                            <Button type=\"submit\" variant='primary'>ENVIAR</Button>\r\n                        </div>\r\n                    </Form>\r\n                </Box>\r\n            </div>\r\n        </ContainerSecundario>\r\n\r\n    )\r\n}\r\n\r\nexport default CadastroVeiculo\r\n"
        }
    ]
}